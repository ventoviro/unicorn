!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.S3Uploader=e():t.S3Uploader=e()}(self,(()=>(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{void 0!==l&&l.toStringTag&&Object.defineProperty(t,l.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{create:()=>le,destroy:()=>fe,get:()=>se,getInstance:()=>ae});const r=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},n=function(t){return t};var o=Math.max;const i=function(t){return function(){return t}},c="object"==typeof global&&global&&global.Object===Object&&global;var a="object"==typeof self&&self&&self.Object===Object&&self;const s=c||a||Function("return this")();var l=s.Symbol;const f=l;var p=Object.prototype,h=p.hasOwnProperty,y=p.toString,d=f?f.toStringTag:void 0;var v=Object.prototype.toString;var b=f?f.toStringTag:void 0;const _=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":b&&b in Object(t)?function(t){var e=h.call(t,d),r=t[d];try{t[d]=void 0;var n=!0}catch(t){}var o=y.call(t);return n&&(e?t[d]=r:delete t[d]),o}(t):function(t){return v.call(t)}(t)},g=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},j=function(t){if(!g(t))return!1;var e=_(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},m=s["__core-js_shared__"];var O,w=(O=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"";var A=Function.prototype.toString;var x=/^\[object .+?Constructor\]$/,z=Function.prototype,P=Object.prototype,S=z.toString,T=P.hasOwnProperty,U=RegExp("^"+S.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const C=function(t){return!(!g(t)||(e=t,w&&w in e))&&(j(t)?U:x).test(function(t){if(null!=t){try{return A.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e},F=function(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return C(r)?r:void 0},I=function(){try{var t=F(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),k=I?function(t,e){return I(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:n;var $=Date.now;const D=(B=k,M=0,E=0,function(){var t=$(),e=16-(t-E);if(E=t,e>0){if(++M>=800)return arguments[0]}else M=0;return B.apply(void 0,arguments)});var B,M,E;const R=function(t,e){return D(function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,c=-1,u=o(i.length-e,0),a=Array(u);++c<u;)a[c]=i[e+c];c=-1;for(var s=Array(e+1);++c<e;)s[c]=i[c];return s[e]=n(a),r(t,this,s)}}(t,e,n),t+"")},X=function(t,e){return t===e||t!=t&&e!=e},q=function(t,e){for(var r=t.length;r--;)if(X(t[r][0],e))return r;return-1};var H=Array.prototype.splice;function L(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}L.prototype.clear=function(){this.__data__=[],this.size=0},L.prototype.delete=function(t){var e=this.__data__,r=q(e,t);return!(r<0||(r==e.length-1?e.pop():H.call(e,r,1),--this.size,0))},L.prototype.get=function(t){var e=this.__data__,r=q(e,t);return r<0?void 0:e[r][1]},L.prototype.has=function(t){return q(this.__data__,t)>-1},L.prototype.set=function(t,e){var r=this.__data__,n=q(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};const N=L,G=F(s,"Map"),V=F(Object,"create");var W=Object.prototype.hasOwnProperty;var J=Object.prototype.hasOwnProperty;function K(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}K.prototype.clear=function(){this.__data__=V?V(null):{},this.size=0},K.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},K.prototype.get=function(t){var e=this.__data__;if(V){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return W.call(e,t)?e[t]:void 0},K.prototype.has=function(t){var e=this.__data__;return V?void 0!==e[t]:J.call(e,t)},K.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=V&&void 0===e?"__lodash_hash_undefined__":e,this};const Q=K,Y=function(t,e){var r=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?r["string"==typeof e?"string":"hash"]:r.map};function Z(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Z.prototype.clear=function(){this.size=0,this.__data__={hash:new Q,map:new(G||N),string:new Q}},Z.prototype.delete=function(t){var e=Y(this,t).delete(t);return this.size-=e?1:0,e},Z.prototype.get=function(t){return Y(this,t).get(t)},Z.prototype.has=function(t){return Y(this,t).has(t)},Z.prototype.set=function(t,e){var r=Y(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};const tt=Z;function et(t){var e=this.__data__=new N(t);this.size=e.size}et.prototype.clear=function(){this.__data__=new N,this.size=0},et.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},et.prototype.get=function(t){return this.__data__.get(t)},et.prototype.has=function(t){return this.__data__.has(t)},et.prototype.set=function(t,e){var r=this.__data__;if(r instanceof N){var n=r.__data__;if(!G||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new tt(n)}return r.set(t,e),this.size=r.size,this};const rt=et,nt=function(t,e,r){"__proto__"==e&&I?I(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},ot=function(t,e,r){(void 0!==r&&!X(t[e],r)||void 0===r&&!(e in t))&&nt(t,e,r)},it=function(t,e,r){for(var n=-1,o=Object(t),i=r(t),c=i.length;c--;){var u=i[ct?c:++n];if(!1===e(o[u],u,o))break}return t};var ct,ut="object"==typeof exports&&exports&&!exports.nodeType&&exports,at=ut&&"object"==typeof module&&module&&!module.nodeType&&module,st=at&&at.exports===ut?s.Buffer:void 0,lt=st?st.allocUnsafe:void 0;const ft=s.Uint8Array,pt=function(t,e){var r,n,o=e?(r=t.buffer,n=new r.constructor(r.byteLength),new ft(n).set(new ft(r)),n):t.buffer;return new t.constructor(o,t.byteOffset,t.length)};var ht=Object.create;const yt=function(){function t(){}return function(e){if(!g(e))return{};if(ht)return ht(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),dt=function(t,e){return function(r){return t(e(r))}}(Object.getPrototypeOf,Object);var vt=Object.prototype;const bt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||vt)},_t=function(t){return null!=t&&"object"==typeof t},gt=function(t){return _t(t)&&"[object Arguments]"==_(t)};var jt=Object.prototype,mt=jt.hasOwnProperty,Ot=jt.propertyIsEnumerable,wt=gt(function(){return arguments}())?gt:function(t){return _t(t)&&mt.call(t,"callee")&&!Ot.call(t,"callee")};const At=wt,xt=Array.isArray,zt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Pt=function(t){return null!=t&&zt(t.length)&&!j(t)};var St="object"==typeof exports&&exports&&!exports.nodeType&&exports,Tt=St&&"object"==typeof module&&module&&!module.nodeType&&module,Ut=Tt&&Tt.exports===St?s.Buffer:void 0;const Ct=(Ut?Ut.isBuffer:void 0)||function(){return!1};var Ft=Function.prototype,It=Object.prototype,kt=Ft.toString,$t=It.hasOwnProperty,Dt=kt.call(Object);var Bt={};Bt["[object Float32Array]"]=Bt["[object Float64Array]"]=Bt["[object Int8Array]"]=Bt["[object Int16Array]"]=Bt["[object Int32Array]"]=Bt["[object Uint8Array]"]=Bt["[object Uint8ClampedArray]"]=Bt["[object Uint16Array]"]=Bt["[object Uint32Array]"]=!0,Bt["[object Arguments]"]=Bt["[object Array]"]=Bt["[object ArrayBuffer]"]=Bt["[object Boolean]"]=Bt["[object DataView]"]=Bt["[object Date]"]=Bt["[object Error]"]=Bt["[object Function]"]=Bt["[object Map]"]=Bt["[object Number]"]=Bt["[object Object]"]=Bt["[object RegExp]"]=Bt["[object Set]"]=Bt["[object String]"]=Bt["[object WeakMap]"]=!1;var Mt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Et=Mt&&"object"==typeof module&&module&&!module.nodeType&&module,Rt=Et&&Et.exports===Mt&&c.process,Xt=function(){try{return Et&&Et.require&&Et.require("util").types||Rt&&Rt.binding&&Rt.binding("util")}catch(t){}}(),qt=Xt&&Xt.isTypedArray;const Ht=qt?function(t){return function(e){return t(e)}}(qt):function(t){return _t(t)&&zt(t.length)&&!!Bt[_(t)]},Lt=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var Nt=Object.prototype.hasOwnProperty;const Gt=function(t,e,r){var n=t[e];Nt.call(t,e)&&X(n,r)&&(void 0!==r||e in t)||nt(t,e,r)};var Vt=/^(?:0|[1-9]\d*)$/;const Wt=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&Vt.test(t))&&t>-1&&t%1==0&&t<e};var Jt=Object.prototype.hasOwnProperty;const Kt=function(t,e){var r=xt(t),n=!r&&At(t),o=!r&&!n&&Ct(t),i=!r&&!n&&!o&&Ht(t),c=r||n||o||i,u=c?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],a=u.length;for(var s in t)!e&&!Jt.call(t,s)||c&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Wt(s,a))||u.push(s);return u};var Qt=Object.prototype.hasOwnProperty;const Yt=function(t){if(!g(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=bt(t),r=[];for(var n in t)("constructor"!=n||!e&&Qt.call(t,n))&&r.push(n);return r},Zt=function(t){return Pt(t)?Kt(t,!0):Yt(t)},te=function(t){return function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,c=e.length;++i<c;){var u=e[i],a=n?n(r[u],t[u],u,r,t):void 0;void 0===a&&(a=t[u]),o?nt(r,u,a):Gt(r,u,a)}return r}(t,Zt(t))},ee=function(t,e,r,n,o,i,c){var u=Lt(t,r),a=Lt(e,r),s=c.get(a);if(s)ot(t,r,s);else{var l=i?i(u,a,r+"",t,e,c):void 0,f=void 0===l;if(f){var p=xt(a),h=!p&&Ct(a),y=!p&&!h&&Ht(a);l=a,p||h||y?xt(u)?l=u:function(t){return _t(t)&&Pt(t)}(u)?l=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(u):h?(f=!1,l=function(t,e){if(e)return t.slice();var r=t.length,n=lt?lt(r):new t.constructor(r);return t.copy(n),n}(a,!0)):y?(f=!1,l=pt(a,!0)):l=[]:function(t){if(!_t(t)||"[object Object]"!=_(t))return!1;var e=dt(t);if(null===e)return!0;var r=$t.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&kt.call(r)==Dt}(a)||At(a)?(l=u,At(u)?l=te(u):g(u)&&!j(u)||(l=function(t){return"function"!=typeof t.constructor||bt(t)?{}:yt(dt(t))}(a))):f=!1}f&&(c.set(a,l),o(l,a,n,i,c),c.delete(a)),ot(t,r,l)}},re=function t(e,r,n,o,i){e!==r&&it(r,(function(c,u){if(i||(i=new rt),g(c))ee(e,r,u,n,t,o,i);else{var a=o?o(Lt(e,u),c,u+"",e,r,i):void 0;void 0===a&&(a=c),ot(e,u,a)}}),Zt)},ne=function t(e,r,n,o,i,c){return g(e)&&g(r)&&(c.set(r,e),re(e,r,void 0,t,c),c.delete(r)),e},oe=(ie=function(t,e,r,n){re(t,e,r,n)},R((function(t,e){var r=-1,n=e.length,o=n>1?e[n-1]:void 0,i=n>2?e[2]:void 0;for(o=ie.length>3&&"function"==typeof o?(n--,o):void 0,i&&function(t,e,r){if(!g(r))return!1;var n=typeof e;return!!("number"==n?Pt(r)&&Wt(e,r.length):"string"==n&&e in r)&&X(r[e],t)}(e[0],e[1],i)&&(o=n<3?void 0:o,n=1),t=Object(t);++r<n;){var c=e[r];c&&ie(t,c,r,o)}return t})));var ie;const ce=R((function(t){return t.push(void 0,ne),r(oe,void 0,t)})),ue={};function ae(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ue[t]||(ue[t]=le(t,e={})),ue[t]}function se(t){return Promise.resolve(le(t))}function le(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new pe(t,e)}function fe(t){delete ue[t]}class pe extends(Unicorn.EventMixin(class{})){constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super();const r=u.data("@s3.uploder."+t)||{};this.name=t,this.options=ce({},e,r,this.constructor.defaultOptions)}upload(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=new FormData,o=ce({},r.formInputs||{},this.options.formInputs);"string"==typeof t&&(t=new Blob([t],{type:r["Content-Type"]||"text/plain"})),(t instanceof Blob||t instanceof File)&&(r["Content-Type"]=r["Content-Type"]||t.type),r.filename&&(r["Content-Disposition"]="attachment; filename*=UTF-8''"+encodeURIComponent(r.filename)),r.key=this.constructor.trimSlashes(this.options.subfolder)+"/"+this.constructor.trimSlashes(e),r.key=this.constructor.trimSlashes(r.key),r["Content-Type"]=r["Content-Type"]||null,r["Content-Disposition"]=r["Content-Disposition"]||null;for(let t in o)n.set(t,o[t]);for(let t of Object.keys(this.options.starts_with))r[t]&&n.set(t,r[t]);return n.append("file",t),this.trigger("start",n),u.$http.post(this.options.endpoint,n,{onUploadProgress:t=>{r.onUploadProgress&&r.onUploadProgress(t),this.trigger("upload-progress",t),t.lengthComputable&&this.trigger("progress",t.loaded/t.total,t)}}).then((t=>{const r=this.options.viewerHost+"/"+this.constructor.trimSlashes(e);return this.trigger("success",r,t),t.url=r,t})).finally((()=>{this.trigger("end")}))}static trimSlashes(t){return t.replace(/^\/+|\/+$/g,"")}}var he,ye,de;return de={endpoint:"",subfolder:"",viewerHost:"",starts_with:[],formInputs:{acl:"",bucket:"",key:"",Policy:"","X-Amz-Algorithm":"","X-Amz-Credential":"","X-Amz-Date":"","X-Amz-Signature":""}},(ye="defaultOptions")in(he=pe)?Object.defineProperty(he,ye,{value:de,enumerable:!0,configurable:!0,writable:!0}):he[ye]=de,u.$loader.asImported("s3.uploader"),e})()));
//# sourceMappingURL=s3-uploader.js.map