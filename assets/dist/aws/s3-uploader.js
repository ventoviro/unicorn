/*! For license information please see s3-uploader.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.S3Uploader=e():t.S3Uploader=e()}(self,(()=>(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{create:()=>de,destroy:()=>be,get:()=>ve,getInstance:()=>he});const r=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},n=function(t){return t};var o=Math.max;const i=function(t){return function(){return t}},c="object"==typeof global&&global&&global.Object===Object&&global;var a="object"==typeof self&&self&&self.Object===Object&&self;const s=c||a||Function("return this")(),f=s.Symbol;var l=Object.prototype,p=l.hasOwnProperty,y=l.toString,h=f?f.toStringTag:void 0;var v=Object.prototype.toString;var d=f?f.toStringTag:void 0;const b=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":d&&d in Object(t)?function(t){var e=p.call(t,h),r=t[h];try{t[h]=void 0;var n=!0}catch(t){}var o=y.call(t);return n&&(e?t[h]=r:delete t[h]),o}(t):function(t){return v.call(t)}(t)},_=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},g=function(t){if(!_(t))return!1;var e=b(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},j=s["__core-js_shared__"];var m,O=(m=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"";var w=Function.prototype.toString;var P=/^\[object .+?Constructor\]$/,S=Function.prototype,x=Object.prototype,A=S.toString,z=x.hasOwnProperty,T=RegExp("^"+A.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const U=function(t){return!(!_(t)||(e=t,O&&O in e))&&(g(t)?T:P).test(function(t){if(null!=t){try{return w.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e},C=function(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return U(r)?r:void 0},k=function(){try{var t=C(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),F=k?function(t,e){return k(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:n;var I=Date.now;const E=(R=F,$=0,B=0,function(){var t=I(),e=16-(t-B);if(B=t,e>0){if(++$>=800)return arguments[0]}else $=0;return R.apply(void 0,arguments)});var R,$,B;const D=function(t,e){return E(function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,u=-1,c=o(i.length-e,0),a=Array(c);++u<c;)a[u]=i[e+u];u=-1;for(var s=Array(e+1);++u<e;)s[u]=i[u];return s[e]=n(a),r(t,this,s)}}(t,e,n),t+"")},M=function(t,e){return t===e||t!=t&&e!=e},X=function(t,e){for(var r=t.length;r--;)if(M(t[r][0],e))return r;return-1};var q=Array.prototype.splice;function H(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}H.prototype.clear=function(){this.__data__=[],this.size=0},H.prototype.delete=function(t){var e=this.__data__,r=X(e,t);return!(r<0||(r==e.length-1?e.pop():q.call(e,r,1),--this.size,0))},H.prototype.get=function(t){var e=this.__data__,r=X(e,t);return r<0?void 0:e[r][1]},H.prototype.has=function(t){return X(this.__data__,t)>-1},H.prototype.set=function(t,e){var r=this.__data__,n=X(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};const L=H,N=C(s,"Map"),G=C(Object,"create");var V=Object.prototype.hasOwnProperty;var W=Object.prototype.hasOwnProperty;function J(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}J.prototype.clear=function(){this.__data__=G?G(null):{},this.size=0},J.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},J.prototype.get=function(t){var e=this.__data__;if(G){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return V.call(e,t)?e[t]:void 0},J.prototype.has=function(t){var e=this.__data__;return G?void 0!==e[t]:W.call(e,t)},J.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=G&&void 0===e?"__lodash_hash_undefined__":e,this};const K=J,Q=function(t,e){var r=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?r["string"==typeof e?"string":"hash"]:r.map};function Y(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Y.prototype.clear=function(){this.size=0,this.__data__={hash:new K,map:new(N||L),string:new K}},Y.prototype.delete=function(t){var e=Q(this,t).delete(t);return this.size-=e?1:0,e},Y.prototype.get=function(t){return Q(this,t).get(t)},Y.prototype.has=function(t){return Q(this,t).has(t)},Y.prototype.set=function(t,e){var r=Q(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};const Z=Y;function tt(t){var e=this.__data__=new L(t);this.size=e.size}tt.prototype.clear=function(){this.__data__=new L,this.size=0},tt.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},tt.prototype.get=function(t){return this.__data__.get(t)},tt.prototype.has=function(t){return this.__data__.has(t)},tt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof L){var n=r.__data__;if(!N||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Z(n)}return r.set(t,e),this.size=r.size,this};const et=tt,rt=function(t,e,r){"__proto__"==e&&k?k(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},nt=function(t,e,r){(void 0!==r&&!M(t[e],r)||void 0===r&&!(e in t))&&rt(t,e,r)},ot=function(t,e,r){for(var n=-1,o=Object(t),i=r(t),u=i.length;u--;){var c=i[it?u:++n];if(!1===e(o[c],c,o))break}return t};var it,ut="object"==typeof exports&&exports&&!exports.nodeType&&exports,ct=ut&&"object"==typeof module&&module&&!module.nodeType&&module,at=ct&&ct.exports===ut?s.Buffer:void 0,st=at?at.allocUnsafe:void 0;const ft=s.Uint8Array,lt=function(t,e){var r,n,o=e?(r=t.buffer,n=new r.constructor(r.byteLength),new ft(n).set(new ft(r)),n):t.buffer;return new t.constructor(o,t.byteOffset,t.length)};var pt=Object.create;const yt=function(){function t(){}return function(e){if(!_(e))return{};if(pt)return pt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),ht=function(t,e){return function(r){return t(e(r))}}(Object.getPrototypeOf,Object);var vt=Object.prototype;const dt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||vt)},bt=function(t){return null!=t&&"object"==typeof t},_t=function(t){return bt(t)&&"[object Arguments]"==b(t)};var gt=Object.prototype,jt=gt.hasOwnProperty,mt=gt.propertyIsEnumerable,Ot=_t(function(){return arguments}())?_t:function(t){return bt(t)&&jt.call(t,"callee")&&!mt.call(t,"callee")};const wt=Ot,Pt=Array.isArray,St=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},xt=function(t){return null!=t&&St(t.length)&&!g(t)};var At="object"==typeof exports&&exports&&!exports.nodeType&&exports,zt=At&&"object"==typeof module&&module&&!module.nodeType&&module,Tt=zt&&zt.exports===At?s.Buffer:void 0;const Ut=(Tt?Tt.isBuffer:void 0)||function(){return!1};var Ct=Function.prototype,kt=Object.prototype,Ft=Ct.toString,It=kt.hasOwnProperty,Et=Ft.call(Object);var Rt={};Rt["[object Float32Array]"]=Rt["[object Float64Array]"]=Rt["[object Int8Array]"]=Rt["[object Int16Array]"]=Rt["[object Int32Array]"]=Rt["[object Uint8Array]"]=Rt["[object Uint8ClampedArray]"]=Rt["[object Uint16Array]"]=Rt["[object Uint32Array]"]=!0,Rt["[object Arguments]"]=Rt["[object Array]"]=Rt["[object ArrayBuffer]"]=Rt["[object Boolean]"]=Rt["[object DataView]"]=Rt["[object Date]"]=Rt["[object Error]"]=Rt["[object Function]"]=Rt["[object Map]"]=Rt["[object Number]"]=Rt["[object Object]"]=Rt["[object RegExp]"]=Rt["[object Set]"]=Rt["[object String]"]=Rt["[object WeakMap]"]=!1;var $t="object"==typeof exports&&exports&&!exports.nodeType&&exports,Bt=$t&&"object"==typeof module&&module&&!module.nodeType&&module,Dt=Bt&&Bt.exports===$t&&c.process,Mt=function(){try{return Bt&&Bt.require&&Bt.require("util").types||Dt&&Dt.binding&&Dt.binding("util")}catch(t){}}(),Xt=Mt&&Mt.isTypedArray;const qt=Xt?function(t){return function(e){return t(e)}}(Xt):function(t){return bt(t)&&St(t.length)&&!!Rt[b(t)]},Ht=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var Lt=Object.prototype.hasOwnProperty;const Nt=function(t,e,r){var n=t[e];Lt.call(t,e)&&M(n,r)&&(void 0!==r||e in t)||rt(t,e,r)};var Gt=/^(?:0|[1-9]\d*)$/;const Vt=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&Gt.test(t))&&t>-1&&t%1==0&&t<e};var Wt=Object.prototype.hasOwnProperty;const Jt=function(t,e){var r=Pt(t),n=!r&&wt(t),o=!r&&!n&&Ut(t),i=!r&&!n&&!o&&qt(t),u=r||n||o||i,c=u?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],a=c.length;for(var s in t)!e&&!Wt.call(t,s)||u&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Vt(s,a))||c.push(s);return c};var Kt=Object.prototype.hasOwnProperty;const Qt=function(t){if(!_(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=dt(t),r=[];for(var n in t)("constructor"!=n||!e&&Kt.call(t,n))&&r.push(n);return r},Yt=function(t){return xt(t)?Jt(t,!0):Qt(t)},Zt=function(t){return function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,u=e.length;++i<u;){var c=e[i],a=n?n(r[c],t[c],c,r,t):void 0;void 0===a&&(a=t[c]),o?rt(r,c,a):Nt(r,c,a)}return r}(t,Yt(t))},te=function(t,e,r,n,o,i,u){var c=Ht(t,r),a=Ht(e,r),s=u.get(a);if(s)nt(t,r,s);else{var f=i?i(c,a,r+"",t,e,u):void 0,l=void 0===f;if(l){var p=Pt(a),y=!p&&Ut(a),h=!p&&!y&&qt(a);f=a,p||y||h?Pt(c)?f=c:function(t){return bt(t)&&xt(t)}(c)?f=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(c):y?(l=!1,f=function(t,e){if(e)return t.slice();var r=t.length,n=st?st(r):new t.constructor(r);return t.copy(n),n}(a,!0)):h?(l=!1,f=lt(a,!0)):f=[]:function(t){if(!bt(t)||"[object Object]"!=b(t))return!1;var e=ht(t);if(null===e)return!0;var r=It.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Ft.call(r)==Et}(a)||wt(a)?(f=c,wt(c)?f=Zt(c):_(c)&&!g(c)||(f=function(t){return"function"!=typeof t.constructor||dt(t)?{}:yt(ht(t))}(a))):l=!1}l&&(u.set(a,f),o(f,a,n,i,u),u.delete(a)),nt(t,r,f)}},ee=function t(e,r,n,o,i){e!==r&&ot(r,(function(u,c){if(i||(i=new et),_(u))te(e,r,c,n,t,o,i);else{var a=o?o(Ht(e,c),u,c+"",e,r,i):void 0;void 0===a&&(a=u),nt(e,c,a)}}),Yt)},re=function t(e,r,n,o,i,u){return _(e)&&_(r)&&(u.set(r,e),ee(e,r,void 0,t,u),u.delete(r)),e},ne=(oe=function(t,e,r,n){ee(t,e,r,n)},D((function(t,e){var r=-1,n=e.length,o=n>1?e[n-1]:void 0,i=n>2?e[2]:void 0;for(o=oe.length>3&&"function"==typeof o?(n--,o):void 0,i&&function(t,e,r){if(!_(r))return!1;var n=typeof e;return!!("number"==n?xt(r)&&Vt(e,r.length):"string"==n&&e in r)&&M(r[e],t)}(e[0],e[1],i)&&(o=n<3?void 0:o,n=1),t=Object(t);++r<n;){var u=e[r];u&&oe(t,u,r,o)}return t})));var oe;const ie=D((function(t){return t.push(void 0,re),r(ne,void 0,t)}));function ue(t){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ue(t)}function ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function se(t,e,r){return e&&ae(t.prototype,e),r&&ae(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function fe(t,e){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fe(t,e)}function le(t,e){if(e&&("object"===ue(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function pe(t){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pe(t)}var ye={};function he(t){return ye[t]||(ye[t]=de(t,{})),ye[t]}function ve(t){return Promise.resolve(de(t))}function de(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new me(t,e)}function be(t){delete ye[t]}var _e,ge,je,me=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fe(t,e)}(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=pe(e);if(r){var o=pe(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return le(this,t)});function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ce(this,o),e=n.call(this);var i=u.data("@s3.uploder."+t)||{};return e.name=t,e.options=ie({},r,i,e.constructor.defaultOptions),e}return se(o,[{key:"upload",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=new FormData,i=ie({},n.formInputs||{},this.options.formInputs);for(var c in"string"==typeof t&&(t=new Blob([t],{type:n["Content-Type"]||"text/plain"})),(t instanceof Blob||t instanceof File)&&(n["Content-Type"]=n["Content-Type"]||t.type),n.filename&&(n["Content-Disposition"]="attachment; filename*=UTF-8''"+encodeURIComponent(n.filename)),n.key=this.constructor.trimSlashes(this.options.subfolder)+"/"+this.constructor.trimSlashes(e),n.key=this.constructor.trimSlashes(n.key),n["Content-Type"]=n["Content-Type"]||null,n["Content-Disposition"]=n["Content-Disposition"]||null,i)o.set(c,i[c]);for(var a=0,s=Object.keys(this.options.starts_with);a<s.length;a++){var f=s[a];n[f]&&o.set(f,n[f])}return o.append("file",t),this.trigger("start",o),u.$http.post(this.options.endpoint,o,{onUploadProgress:function(t){n.onUploadProgress&&n.onUploadProgress(t),r.trigger("upload-progress",t),t.lengthComputable&&r.trigger("progress",t.loaded/t.total,t)}}).then((function(t){var n=r.options.viewerHost+"/"+r.constructor.trimSlashes(e);return r.trigger("success",n,t),t.url=n,t})).finally((function(){r.trigger("end")}))}}],[{key:"trimSlashes",value:function(t){return t.replace(/^\/+|\/+$/g,"")}}]),o}(Unicorn.EventMixin(function(){return se((function t(){ce(this,t)}))}()));return je={endpoint:"",subfolder:"",viewerHost:"",starts_with:[],formInputs:{acl:"",bucket:"",key:"",Policy:"","X-Amz-Algorithm":"","X-Amz-Credential":"","X-Amz-Date":"","X-Amz-Signature":""}},(ge="defaultOptions")in(_e=me)?Object.defineProperty(_e,ge,{value:je,enumerable:!0,configurable:!0,writable:!0}):_e[ge]=je,u.$loader.asImported("s3.uploader"),e})()));
//# sourceMappingURL=s3-uploader.js.map