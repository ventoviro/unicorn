!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.S3Uploader=r():t.S3Uploader=r()}(window,(function(){return function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=7)}([function(t,r,e){"use strict";var n=e(1),o="object"==typeof self&&self&&self.Object===Object&&self,i=n.a||o||Function("return this")();r.a=i},function(t,r,e){"use strict";(function(t){var e="object"==typeof t&&t&&t.Object===Object&&t;r.a=e}).call(this,e(8))},function(t,r,e){"use strict";(function(t){var n=e(0),o=e(5),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,u=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=u&&u.exports===i?n.a.Buffer:void 0,c=(a?a.isBuffer:void 0)||o.a;r.a=c}).call(this,e(3)(t))},function(t,r){t.exports=function(t){if(!t.webpackPolyfill){var r=Object.create(t);r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),Object.defineProperty(r,"exports",{enumerable:!0}),r.webpackPolyfill=1}return r}},function(t,r,e){"use strict";(function(t){var n=e(1),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,u=i&&i.exports===o&&n.a.process,a=function(){try{var t=i&&i.require&&i.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();r.a=a}).call(this,e(3)(t))},function(t,r,e){"use strict";r.a=function(){return!1}},function(t,r,e){"use strict";(function(t){var n=e(0),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,u=i&&i.exports===o?n.a.Buffer:void 0,a=u?u.allocUnsafe:void 0;r.a=function(t,r){if(r)return t.slice();var e=t.length,n=a?a(e):new t.constructor(e);return t.copy(n),n}}).call(this,e(3)(t))},function(t,r,e){t.exports=e(9)},function(t,r){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,r,e){"use strict";e.r(r),e.d(r,"getInstance",(function(){return Dr})),e.d(r,"destroy",(function(){return Ir}));var n=function(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)};var o=function(t){return t},i=Math.max;var a=function(t,r,e){return r=i(void 0===r?t.length-1:r,0),function(){for(var o=arguments,u=-1,a=i(o.length-r,0),c=Array(a);++u<a;)c[u]=o[r+u];u=-1;for(var f=Array(r+1);++u<r;)f[u]=o[u];return f[r]=e(c),n(t,this,f)}};var c=function(t){return function(){return t}},f=e(0),s=f.a.Symbol,l=Object.prototype,p=l.hasOwnProperty,v=l.toString,y=s?s.toStringTag:void 0;var h=function(t){var r=p.call(t,y),e=t[y];try{t[y]=void 0;var n=!0}catch(t){}var o=v.call(t);return n&&(r?t[y]=e:delete t[y]),o},b=Object.prototype.toString;var d=function(t){return b.call(t)},_=s?s.toStringTag:void 0;var j=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":_&&_ in Object(t)?h(t):d(t)};var g=function(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)};var O,m=function(t){if(!g(t))return!1;var r=j(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r},w=f.a["__core-js_shared__"],x=(O=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"";var P=function(t){return!!x&&x in t},S=Function.prototype.toString;var A=function(t){if(null!=t){try{return S.call(t)}catch(t){}try{return t+""}catch(t){}}return""},z=/^\[object .+?Constructor\]$/,T=Function.prototype,k=Object.prototype,F=T.toString,C=k.hasOwnProperty,U=RegExp("^"+F.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var R=function(t){return!(!g(t)||P(t))&&(m(t)?U:z).test(A(t))};var E=function(t,r){return null==t?void 0:t[r]};var B=function(t,r){var e=E(t,r);return R(e)?e:void 0},D=function(){try{var t=B(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),I=D?function(t,r){return D(t,"toString",{configurable:!0,enumerable:!1,value:c(r),writable:!0})}:o,M=Date.now;var $=function(t){var r=0,e=0;return function(){var n=M(),o=16-(n-e);if(e=n,o>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}(I);var X=function(t,r){return $(a(t,r,o),t+"")};var q=function(){this.__data__=[],this.size=0};var H=function(t,r){return t===r||t!=t&&r!=r};var L=function(t,r){for(var e=t.length;e--;)if(H(t[e][0],r))return e;return-1},N=Array.prototype.splice;var G=function(t){var r=this.__data__,e=L(r,t);return!(e<0)&&(e==r.length-1?r.pop():N.call(r,e,1),--this.size,!0)};var V=function(t){var r=this.__data__,e=L(r,t);return e<0?void 0:r[e][1]};var W=function(t){return L(this.__data__,t)>-1};var J=function(t,r){var e=this.__data__,n=L(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};function K(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}K.prototype.clear=q,K.prototype.delete=G,K.prototype.get=V,K.prototype.has=W,K.prototype.set=J;var Q=K;var Y=function(){this.__data__=new Q,this.size=0};var Z=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e};var tt=function(t){return this.__data__.get(t)};var rt=function(t){return this.__data__.has(t)},et=B(f.a,"Map"),nt=B(Object,"create");var ot=function(){this.__data__=nt?nt(null):{},this.size=0};var it=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},ut=Object.prototype.hasOwnProperty;var at=function(t){var r=this.__data__;if(nt){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return ut.call(r,t)?r[t]:void 0},ct=Object.prototype.hasOwnProperty;var ft=function(t){var r=this.__data__;return nt?void 0!==r[t]:ct.call(r,t)};var st=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=nt&&void 0===r?"__lodash_hash_undefined__":r,this};function lt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}lt.prototype.clear=ot,lt.prototype.delete=it,lt.prototype.get=at,lt.prototype.has=ft,lt.prototype.set=st;var pt=lt;var vt=function(){this.size=0,this.__data__={hash:new pt,map:new(et||Q),string:new pt}};var yt=function(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var ht=function(t,r){var e=t.__data__;return yt(r)?e["string"==typeof r?"string":"hash"]:e.map};var bt=function(t){var r=ht(this,t).delete(t);return this.size-=r?1:0,r};var dt=function(t){return ht(this,t).get(t)};var _t=function(t){return ht(this,t).has(t)};var jt=function(t,r){var e=ht(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function gt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}gt.prototype.clear=vt,gt.prototype.delete=bt,gt.prototype.get=dt,gt.prototype.has=_t,gt.prototype.set=jt;var Ot=gt;var mt=function(t,r){var e=this.__data__;if(e instanceof Q){var n=e.__data__;if(!et||n.length<199)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new Ot(n)}return e.set(t,r),this.size=e.size,this};function wt(t){var r=this.__data__=new Q(t);this.size=r.size}wt.prototype.clear=Y,wt.prototype.delete=Z,wt.prototype.get=tt,wt.prototype.has=rt,wt.prototype.set=mt;var xt=wt;var Pt=function(t,r,e){"__proto__"==r&&D?D(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e};var St=function(t,r,e){(void 0!==e&&!H(t[r],e)||void 0===e&&!(r in t))&&Pt(t,r,e)};var At=function(t){return function(r,e,n){for(var o=-1,i=Object(r),u=n(r),a=u.length;a--;){var c=u[t?a:++o];if(!1===e(i[c],c,i))break}return r}}(),zt=e(6),Tt=f.a.Uint8Array;var kt=function(t){var r=new t.constructor(t.byteLength);return new Tt(r).set(new Tt(t)),r};var Ft=function(t,r){var e=r?kt(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)};var Ct=function(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r},Ut=Object.create,Rt=function(){function t(){}return function(r){if(!g(r))return{};if(Ut)return Ut(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}();var Et=function(t,r){return function(e){return t(r(e))}}(Object.getPrototypeOf,Object),Bt=Object.prototype;var Dt=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||Bt)};var It=function(t){return"function"!=typeof t.constructor||Dt(t)?{}:Rt(Et(t))};var Mt=function(t){return null!=t&&"object"==typeof t};var $t=function(t){return Mt(t)&&"[object Arguments]"==j(t)},Xt=Object.prototype,qt=Xt.hasOwnProperty,Ht=Xt.propertyIsEnumerable,Lt=$t(function(){return arguments}())?$t:function(t){return Mt(t)&&qt.call(t,"callee")&&!Ht.call(t,"callee")},Nt=Array.isArray;var Gt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var Vt=function(t){return null!=t&&Gt(t.length)&&!m(t)};var Wt=function(t){return Mt(t)&&Vt(t)},Jt=e(2),Kt=Function.prototype,Qt=Object.prototype,Yt=Kt.toString,Zt=Qt.hasOwnProperty,tr=Yt.call(Object);var rr=function(t){if(!Mt(t)||"[object Object]"!=j(t))return!1;var r=Et(t);if(null===r)return!0;var e=Zt.call(r,"constructor")&&r.constructor;return"function"==typeof e&&e instanceof e&&Yt.call(e)==tr},er={};er["[object Float32Array]"]=er["[object Float64Array]"]=er["[object Int8Array]"]=er["[object Int16Array]"]=er["[object Int32Array]"]=er["[object Uint8Array]"]=er["[object Uint8ClampedArray]"]=er["[object Uint16Array]"]=er["[object Uint32Array]"]=!0,er["[object Arguments]"]=er["[object Array]"]=er["[object ArrayBuffer]"]=er["[object Boolean]"]=er["[object DataView]"]=er["[object Date]"]=er["[object Error]"]=er["[object Function]"]=er["[object Map]"]=er["[object Number]"]=er["[object Object]"]=er["[object RegExp]"]=er["[object Set]"]=er["[object String]"]=er["[object WeakMap]"]=!1;var nr=function(t){return Mt(t)&&Gt(t.length)&&!!er[j(t)]};var or=function(t){return function(r){return t(r)}},ir=e(4),ur=ir.a&&ir.a.isTypedArray,ar=ur?or(ur):nr;var cr=function(t,r){if(("constructor"!==r||"function"!=typeof t[r])&&"__proto__"!=r)return t[r]},fr=Object.prototype.hasOwnProperty;var sr=function(t,r,e){var n=t[r];fr.call(t,r)&&H(n,e)&&(void 0!==e||r in t)||Pt(t,r,e)};var lr=function(t,r,e,n){var o=!e;e||(e={});for(var i=-1,u=r.length;++i<u;){var a=r[i],c=n?n(e[a],t[a],a,e,t):void 0;void 0===c&&(c=t[a]),o?Pt(e,a,c):sr(e,a,c)}return e};var pr=function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n},vr=/^(?:0|[1-9]\d*)$/;var yr=function(t,r){var e=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==e||"symbol"!=e&&vr.test(t))&&t>-1&&t%1==0&&t<r},hr=Object.prototype.hasOwnProperty;var br=function(t,r){var e=Nt(t),n=!e&&Lt(t),o=!e&&!n&&Object(Jt.a)(t),i=!e&&!n&&!o&&ar(t),u=e||n||o||i,a=u?pr(t.length,String):[],c=a.length;for(var f in t)!r&&!hr.call(t,f)||u&&("length"==f||o&&("offset"==f||"parent"==f)||i&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||yr(f,c))||a.push(f);return a};var dr=function(t){var r=[];if(null!=t)for(var e in Object(t))r.push(e);return r},_r=Object.prototype.hasOwnProperty;var jr=function(t){if(!g(t))return dr(t);var r=Dt(t),e=[];for(var n in t)("constructor"!=n||!r&&_r.call(t,n))&&e.push(n);return e};var gr=function(t){return Vt(t)?br(t,!0):jr(t)};var Or=function(t){return lr(t,gr(t))};var mr=function(t,r,e,n,o,i,u){var a=cr(t,e),c=cr(r,e),f=u.get(c);if(f)St(t,e,f);else{var s=i?i(a,c,e+"",t,r,u):void 0,l=void 0===s;if(l){var p=Nt(c),v=!p&&Object(Jt.a)(c),y=!p&&!v&&ar(c);s=c,p||v||y?Nt(a)?s=a:Wt(a)?s=Ct(a):v?(l=!1,s=Object(zt.a)(c,!0)):y?(l=!1,s=Ft(c,!0)):s=[]:rr(c)||Lt(c)?(s=a,Lt(a)?s=Or(a):g(a)&&!m(a)||(s=It(c))):l=!1}l&&(u.set(c,s),o(s,c,n,i,u),u.delete(c)),St(t,e,s)}};var wr=function t(r,e,n,o,i){r!==e&&At(e,(function(u,a){if(i||(i=new xt),g(u))mr(r,e,a,n,t,o,i);else{var c=o?o(cr(r,a),u,a+"",r,e,i):void 0;void 0===c&&(c=u),St(r,a,c)}}),gr)};var xr=function t(r,e,n,o,i,u){return g(r)&&g(e)&&(u.set(e,r),wr(r,e,void 0,t,u),u.delete(e)),r};var Pr=function(t,r,e){if(!g(e))return!1;var n=typeof r;return!!("number"==n?Vt(e)&&yr(r,e.length):"string"==n&&r in e)&&H(e[r],t)};var Sr=function(t){return X((function(r,e){var n=-1,o=e.length,i=o>1?e[o-1]:void 0,u=o>2?e[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,u&&Pr(e[0],e[1],u)&&(i=o<3?void 0:i,o=1),r=Object(r);++n<o;){var a=e[n];a&&t(r,a,n,i)}return r}))}((function(t,r,e,n){wr(t,r,e,n)})),Ar=X((function(t){return t.push(void 0,xr),n(Sr,void 0,t)}));function zr(t){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tr(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function kr(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fr(t,r){if(r&&("object"===zr(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Cr(t){return(Cr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ur(t,r,e){return(Ur=Rr()?Reflect.construct:function(t,r,e){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(t,n));return e&&Er(o,e.prototype),o}).apply(null,arguments)}function Rr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Er(t,r){return(Er=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}
/**
 * Part of datavideo project.
 *
 * @copyright  Copyright (C) 2021 __ORGANIZATION__.
 * @license    __LICENSE__
 */var Br={};function Dr(t){if(!Br[t]){for(var r=arguments.length,e=new Array(r>1?r-1:0),n=1;n<r;n++)e[n-1]=arguments[n];Br[t]=Ur(qr,[t].concat(e))}return Br[t]}function Ir(t){delete Br[t]}var Mr,$r,Xr,qr=function(t){!function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&Er(t,r)}(c,t);var r,e,n,o,i,a=(r=c,e=Rr(),function(){var t,n=Cr(r);if(e){var o=Cr(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return Fr(this,t)});function c(t){var r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Tr(this,c),(r=a.call(this)).name=t,r.options=Ar({},e,r.constructor.defaultOptions),r}return n=c,i=[{key:"trimSlashes",value:function(t){return t.replace(/^\/+|\/+$/g,"")}}],(o=[{key:"upload",value:function(t,r){var e=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=new FormData,i=Ar({},this.options.formInputs);for(var a in"string"==typeof t&&(t=new Blob([t],{type:n["Content-Type"]||"text/plain"})),(t instanceof Blob||t instanceof File)&&(n["Content-Type"]=n["Content-Type"]||t.type),n.filename&&(n["Content-Disposition"]="attachment; filename*=UTF-8''"+encodeURIComponent(n.filename)),n.key=this.constructor.trimSlashes(this.options.subfolder)+"/"+this.constructor.trimSlashes(r),n.key=this.constructor.trimSlashes(n.key),n["Content-Type"]=n["Content-Type"]||null,n["Content-Disposition"]=n["Content-Disposition"]||null,i)o.set(a,i[a]);for(var c=0,f=Object.keys(this.options.starts_with);c<f.length;c++){var s=f[c];n[s]&&o.set(s,n[s])}return o.append("file",t),this.trigger("start",o),u.$http.post(this.options.endpoint,o,{onUploadProgress:function(t){e.trigger("upload-progress",t),t.lengthComputable&&e.trigger("progress",t.loaded/t.total,t)}}).then((function(t){var n=e.options.viewerHost+"/"+e.constructor.trimSlashes(r);e.trigger("success",n,t)})).finally((function(){e.trigger("end")}))}}])&&kr(n.prototype,o),i&&kr(n,i),c}(Unicorn.EventMixin(function(){return function t(){Tr(this,t)}}()));Xr={endpoint:"",subfolder:"",viewerHost:"",starts_with:[],formInputs:{acl:"",bucket:"",key:"",Policy:"","X-Amz-Algorithm":"","X-Amz-Credential":"","X-Amz-Date":"","X-Amz-Signature":""}},($r="defaultOptions")in(Mr=qr)?Object.defineProperty(Mr,$r,{value:Xr,enumerable:!0,configurable:!0,writable:!0}):Mr[$r]=Xr}])}));
//# sourceMappingURL=s3-uploader.js.map