System.register([],(function(t,e){var s;function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}return t("ButtonRadio",void 0),{setters:[],execute:function(){s={selector:".btn-group .radio",buttonClass:"btn",activeClass:"active",color:{default:"btn-default btn-outline-secondary",green:"btn-success",red:"btn-danger",blue:"btn-primary"}},t("ButtonRadio",class{static handle(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.getBoundedInstance(t,"button-radio",(t=>new this(t,e)))}constructor(t,e){a(this,"wrapper",null),a(this,"radios",[]),a(this,"inputs",[]),a(this,"buttons",[]),a(this,"colors",[]),this.element=u.selectOne(t),this.options=e=u.defaultsDeep({},e,s);let l=null;l=null!=this.element.dataset.fieldInput?this.element:this.element.querySelector("[data-field-input]"),this.wrapper=l;let r=l.querySelector(".btn-group");const n=null!=r;r||(r=u.h("div",{class:"btn-group"})),this.radios=l.querySelectorAll(".radio"),this.radios.forEach((t=>{const e=this.prepareButton(t,n);n||r.appendChild(e)})),this.syncState(),l.insertBefore(r,l.firstChild),l.dispatchEvent(new Event("button-radio.loaded")),this.colors=[...new Set(this.colors)]}prepareButton(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=this.options,a=t.querySelector("input"),l=t.querySelector("label");let r=null;e?(r=this.wrapper.querySelector(`[data-for="${a.id}"]`),r.classList.add(...this.parseClasses(`${s.buttonClass} ${s.color.default}`))):r=u.h("button",{type:"button",class:`${s.buttonClass} ${s.color.default}`,"data-value":a.value},`<span>${l.innerHTML}</span>`),u.$helper.set(r,"__unicorn.input",a),this.inputs.push(a),this.buttons.push(r),t.style.display="none";let n=a.dataset.colorClass;if(null==n){switch(a.value){case"":n=s.color.blue;break;case"0":n=s.color.red;break;default:n=s.color.green}a.dataset.colorClass=n}return this.colors.push(n),(a.disabled||null!=a.getAttribute("readonly"))&&(r.classList.add("disabled"),r.disabled=!0),null!=a.getAttribute("readonly")&&r.classList.add("readonly"),r.addEventListener("click",(()=>{if(a.getAttribute("disabled")||a.getAttribute("readonly"))return;!a.checked&&(this.inputs.forEach((t=>{t.checked=!1})),a.checked=!0,this.syncState(),a.dispatchEvent(new Event("change")),a.dispatchEvent(new Event("input")))})),r}syncState(){const t=this.options;this.buttons.forEach((e=>{const s=u.$helper.get(e,"__unicorn.input");e.classList.add(...this.parseClasses(t.color.default)),e.classList.remove(...this.parseClasses(t.activeClass)),e.classList.remove(...this.parseClasses(...this.colors)),s.checked&&(e.classList.add(...this.parseClasses(t.activeClass)),e.classList.add(...this.parseClasses(s.dataset.colorClass)),e.classList.remove(...this.parseClasses(t.color.default)))}))}parseClasses(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return(e=e.join(" ")).split(" ").filter((t=>""!==t))}})}}}));
//# sourceMappingURL=button-radio.js.map
