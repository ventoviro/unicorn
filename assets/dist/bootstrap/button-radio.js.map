{"version":3,"file":"button-radio.js","names":["ButtonRadio","defaultOptions","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","t","i","_toPrimitive","String","r","e","Symbol","toPrimitive","call","TypeError","Number","_export","setters","execute","selector","buttonClass","activeClass","color","green","red","blue","handle","el","options","arguments","length","undefined","u","getBoundedInstance","constructor","element","selectOne","defaultsDeep","wrapper","dataset","fieldInput","querySelector","inputGroup","exists","h","class","radios","querySelectorAll","forEach","radio","button","prepareButton","appendChild","syncState","insertBefore","firstChild","dispatchEvent","Event","colors","Set","input","label","id","classList","add","parseClasses","type","innerHTML","$helper","set","inputs","push","buttons","style","display","colorClass","disabled","getAttribute","addEventListener","changed","checked","ele","get","default","remove","_len","className","Array","_key","join","split","filter"],"sources":["bootstrap/button-radio.js"],"sourcesContent":["const defaultOptions = {\n  selector: '.btn-group .radio',\n  buttonClass: 'btn',\n  activeClass: 'active',\n  color: {\n    'default': 'btn-default btn-outline-secondary',\n    green: 'btn-success',\n    red: 'btn-danger',\n    blue: 'btn-primary'\n  }\n};\n\nexport class ButtonRadio {\n  wrapper = null;\n  radios = [];\n  inputs = [];\n  buttons = [];\n  colors = [];\n\n  static handle(el, options = {}) {\n    return u.getBoundedInstance(el, 'button-radio', (el) => {\n      return new this(el, options);\n    });\n  }\n\n  constructor(selector, options) {\n    this.element = u.selectOne(selector);\n    this.options = options = u.defaultsDeep({}, options, defaultOptions);\n    let wrapper = null;\n\n    // Turn radios into btn-group\n\n    if (this.element.dataset.fieldInput != null) {\n      wrapper = this.element;\n    } else {\n      wrapper = this.element.querySelector('[data-field-input]');\n    }\n\n    this.wrapper = wrapper;\n    let inputGroup = wrapper.querySelector('.btn-group');\n    const exists = inputGroup != null;\n\n    if (!inputGroup) {\n      inputGroup = u.h('div', { class: 'btn-group' })\n    }\n\n    this.radios = wrapper.querySelectorAll('.radio');\n\n    this.radios.forEach(radio => {\n      const button = this.prepareButton(radio, exists);\n\n      if (!exists) {\n        inputGroup.appendChild(button);\n      }\n    });\n\n    this.syncState();\n\n    wrapper.insertBefore(inputGroup, wrapper.firstChild);\n\n    wrapper.dispatchEvent(new Event('button-radio.loaded'));\n\n    // Make color elements unique\n    this.colors = [...new Set(this.colors)];\n  }\n\n  prepareButton(radio, exists = false) {\n    const options = this.options;\n\n    const input = radio.querySelector('input');\n    const label = radio.querySelector('label');\n\n    let button = null;\n\n    if (exists) {\n      button = this.wrapper.querySelector(`[data-for=\"${input.id}\"]`);\n      button.classList.add(...this.parseClasses(`${options.buttonClass} ${options.color['default']}`));\n    } else {\n      button = u.h(\n        'button',\n        {\n          type: 'button',\n          class: `${options.buttonClass} ${options.color['default']}`,\n          'data-value': input.value,\n        },\n        `<span>${label.innerHTML}</span>`\n      );\n    }\n\n    u.$helper.set(button, '__unicorn.input', input);\n    this.inputs.push(input);\n    this.buttons.push(button);\n\n    radio.style.display = 'none';\n\n    // Prepare color schema\n    let color = input.dataset.colorClass;\n\n    if (color == null) {\n      switch (input.value) {\n        case '':\n          color = options.color.blue;\n          break;\n\n        case '0':\n          color = options.color.red;\n          break;\n\n        default:\n          color = options.color.green;\n          break;\n      }\n\n      input.dataset.colorClass = color;\n    }\n    \n    this.colors.push(color);\n\n    if (input.disabled || input.getAttribute('readonly') != null) {\n      button.classList.add('disabled');\n      button.disabled = true;\n    }\n\n    if (input.getAttribute('readonly') != null) {\n      button.classList.add('readonly');\n    }\n\n    // Bind event\n    button.addEventListener('click', () => {\n      if (input.getAttribute('disabled') || input.getAttribute('readonly')) {\n        return;\n      }\n\n      const changed = !input.checked;\n\n      if (changed) {\n        this.inputs.forEach((ele) => {\n          ele.checked = false;\n        });\n\n        input.checked = true;\n\n        input.dispatchEvent(new Event('change'));\n        input.dispatchEvent(new Event('input'));\n      }\n    });\n\n    input.addEventListener('change', () => {\n      this.syncState();\n    });\n\n    return button;\n  }\n\n  syncState() {\n    const options = this.options;\n\n    this.buttons.forEach((button) => {\n      const input = u.$helper.get(button, '__unicorn.input');\n\n      button.classList.add(...this.parseClasses(options.color.default));\n      button.classList.remove(...this.parseClasses(options.activeClass));\n      button.classList.remove(...this.parseClasses(...this.colors));\n\n      if (input.checked) {\n        button.classList.add(...this.parseClasses(options.activeClass));\n        button.classList.add(...this.parseClasses(input.dataset.colorClass));\n        button.classList.remove(...this.parseClasses(options.color.default));\n      }\n    });\n  }\n\n  parseClasses(...className) {\n    className = className.join(' ');\n    return className.split(' ').filter(t => t !== '');\n  }\n}\n"],"mappings":"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"}