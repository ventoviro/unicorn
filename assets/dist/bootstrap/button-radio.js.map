{"version":3,"sources":["bootstrap/button-radio.js"],"names":["System","register","_export","_context","defaultOptions","_toConsumableArray","arr","Array","isArray","_arrayLikeToArray","_arrayWithoutHoles","iter","Symbol","iterator","from","_iterableToArray","o","minLen","n","Object","prototype","toString","call","slice","constructor","name","test","_unsupportedIterableToArray","TypeError","_nonIterableSpread","len","length","i","arr2","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_defineProperty","obj","value","setters","execute","selector","buttonClass","activeClass","color","default","green","red","ButtonRadio","options","blue","_this","this","instance","Constructor","_classCallCheck","element","u","selectOne","defaultsDeep","wrapper","dataset","fieldInput","querySelector","exists","inputGroup","h","class","querySelectorAll","forEach","radio","button","prepareButton","appendChild","syncState","insertBefore","firstChild","Event","colors","Set","protoProps","staticProps","className","split","_this4","arguments","undefined","getBoundedInstance","el","input","label","_button$classList","concat","id","classList","add","apply","parseClasses","type","set","inputs","push","buttons","style","display","colorClass","disabled","addEventListener","getAttribute","checked","_this2","ele","dispatchEvent","_this3","_button$classList2","_button$classList3","_button$classList4","_button$classList5","_button$classList6","_button$classList7","$helper","get","remove","_len","_key","join","filter","t"],"mappings":"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","file":"button-radio.js","sourcesContent":["/**\n * Part of unicorn project.\n *\n * @copyright  Copyright (C) 2021 __ORGANIZATION__.\n * @license    __LICENSE__\n */\n\nconst defaultOptions = {\n  selector: '.btn-group .radio',\n  buttonClass: 'btn',\n  activeClass: 'active',\n  color: {\n    'default': 'btn-default btn-outline-secondary',\n    green: 'btn-success',\n    red: 'btn-danger',\n    blue: 'btn-primary'\n  }\n};\n\nexport class ButtonRadio {\n  wrapper = null;\n  radios = [];\n  inputs = [];\n  buttons = [];\n  colors = [];\n\n  static handle(el, options = {}) {\n    return u.getBoundedInstance(el, 'button-radio', (el) => {\n      return new this(el, options);\n    });\n  }\n\n  constructor(selector, options) {\n    this.element = u.selectOne(selector);\n    this.options = options = u.defaultsDeep({}, options, defaultOptions);\n    let wrapper = null;\n\n    // Turn radios into btn-group\n\n    if (this.element.dataset.fieldInput != null) {\n      wrapper = this.element;\n    } else {\n      wrapper = this.element.querySelector('[data-field-input]');\n    }\n\n    this.wrapper = wrapper;\n    let inputGroup = wrapper.querySelector('.btn-group');\n    const exists = inputGroup != null;\n\n    if (!inputGroup) {\n      inputGroup = u.h('div', { class: 'btn-group' })\n    }\n\n    this.radios = wrapper.querySelectorAll('.radio');\n\n    this.radios.forEach(radio => {\n      const button = this.prepareButton(radio, exists);\n\n      if (!exists) {\n        inputGroup.appendChild(button);\n      }\n    });\n\n    this.syncState();\n\n    wrapper.insertBefore(inputGroup, wrapper.firstChild);\n\n    wrapper.dispatchEvent(new Event('button-radio.loaded'));\n\n    // Make color elements unique\n    this.colors = [...new Set(this.colors)];\n  }\n\n  prepareButton(radio, exists = false) {\n    const options = this.options;\n\n    const input = radio.querySelector('input');\n    const label = radio.querySelector('label');\n\n    let button = null;\n\n    if (exists) {\n      button = this.wrapper.querySelector(`[data-for=\"${input.id}\"]`);\n      button.classList.add(...this.parseClasses(`${options.buttonClass} ${options.color['default']}`));\n    } else {\n      button = u.h(\n        'button',\n        {\n          type: 'button',\n          class: `${options.buttonClass} ${options.color['default']}`,\n          'data-value': input.value,\n        },\n        `<span>${label.innerHTML}</span>`\n      );\n    }\n\n    u.$helper.set(button, '__unicorn.input', input);\n    this.inputs.push(input);\n    this.buttons.push(button);\n\n    radio.style.display = 'none';\n\n    // Prepare color schema\n    let color = input.dataset.colorClass;\n\n    if (color == null) {\n      switch (input.value) {\n        case '':\n          color = options.color.blue;\n          break;\n\n        case '0':\n          color = options.color.red;\n          break;\n\n        default:\n          color = options.color.green;\n          break;\n      }\n\n      input.dataset.colorClass = color;\n    }\n    \n    this.colors.push(color);\n\n    if (input.disabled) {\n      button.classList.add('disabled');\n    }\n\n    if (input.getAttribute('readonly')) {\n      button.classList.add('readonly');\n    }\n\n    // Bind event\n    button.addEventListener('click', () => {\n      if (input.getAttribute('disabled') || input.getAttribute('readonly')) {\n        return;\n      }\n\n      const changed = !input.checked;\n\n      if (changed) {\n        this.inputs.forEach((ele) => {\n          ele.checked = false;\n        });\n\n        input.checked = true;\n\n        this.syncState();\n\n        input.dispatchEvent(new Event('change'));\n        input.dispatchEvent(new Event('input'));\n      }\n    });\n\n    return button;\n  }\n\n  syncState() {\n    const options = this.options;\n\n    this.buttons.forEach((button) => {\n      const input = u.$helper.get(button, '__unicorn.input');\n\n      button.classList.add(...this.parseClasses(options.color.default));\n      button.classList.remove(...this.parseClasses(options.activeClass));\n      button.classList.remove(...this.parseClasses(...this.colors));\n\n      if (input.checked) {\n        button.classList.add(...this.parseClasses(options.activeClass));\n        button.classList.add(...this.parseClasses(input.dataset.colorClass));\n        button.classList.remove(...this.parseClasses(options.color.default));\n      }\n    });\n  }\n\n  parseClasses(...className) {\n    className = className.join(' ');\n    return className.split(' ').filter(t => t !== '');\n  }\n}\n"]}