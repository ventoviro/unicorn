{"version":3,"file":"keep-tab.js","names":["LoadTab","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","t","i","_toPrimitive","String","r","e","Symbol","toPrimitive","call","TypeError","Number","_export","setters","execute","constructor","selector","options","arguments","length","undefined","uid","id","$element","u","selectOne","console","warn","tabButtons","querySelectorAll","TAB_ITEM_SELECTOR","storageKey","hashCode","location","href","bindEvents","setTimeout","switchTab","delay","forEach","button","addEventListener","window","localStorage","setItem","getButtonHref","dataset","bsTarget","target","findTabButtonByHref","selectAll","filter","shift","activateTab","tabTrigger","bootstrap","Tab","show","hasTab","getItem","removeItem","tabhref","text","md5"],"sources":["bootstrap/keep-tab.js"],"sourcesContent":["export class LoadTab {\n  static TAB_ITEM_SELECTOR = '[data-toggle=tab],[data-bs-toggle=tab],[data-toggle=pill],[data-bs-toggle=pill]';\n\n  /**\n   * Class init.\n   *\n   * @param {HTMLElement|string} selector\n   * @param {Object}      options\n   *\n   * @constructor\n   */\n  constructor(selector, options = {}) {\n    let uid = selector;\n\n    if (typeof selector === 'object') {\n      uid = options.uid || selector.id;\n    }\n\n    const $element = this.$element = u.selectOne(selector);\n\n    if (!$element) {\n      console.warn(`[KeepTab] Element ${selector} not found.`);\n      return;\n    }\n\n    this.$element = $element;\n    this.tabButtons = $element.querySelectorAll(this.constructor.TAB_ITEM_SELECTOR);\n\n    this.storageKey = 'tab-href-' + this.hashCode(location.href + ':' + uid);\n    this.options = options;\n\n    this.bindEvents();\n\n    setTimeout(() => {\n      this.switchTab();\n    }, this.options.delay || 0);\n  }\n\n  bindEvents() {\n    [].forEach.call(this.tabButtons, (button) => {\n      button.addEventListener('click', () => {\n        // Store the selected tab href in localstorage\n        window.localStorage.setItem(this.storageKey, this.getButtonHref(button));\n      });\n    });\n  }\n\n  getButtonHref(button) {\n    return button.dataset.bsTarget || button.dataset.target || button.href\n  }\n\n  findTabButtonByHref(href) {\n    return u.selectAll(this.$element.querySelectorAll(this.constructor.TAB_ITEM_SELECTOR))\n      .filter((button) => {\n        if (button.href === href) {\n          return true;\n        }\n\n        if (button.dataset.bsTarget === href) {\n          return true;\n        }\n\n        return button.dataset.target === href;\n      })\n      .shift();\n  }\n\n  /**\n   * Active tab.\n   *\n   * @param {string} href\n   */\n  activateTab(href) {\n    const tabTrigger = this.findTabButtonByHref(href);\n\n    if (tabTrigger) {\n      (new bootstrap.Tab(tabTrigger)).show();\n    }\n  }\n\n  /**\n   * Has tab.\n   *\n   * @param {string} href\n   *\n   * @returns {*}\n   */\n  hasTab(href) {\n    return this.findTabButtonByHref(href) != null;\n  }\n\n  /**\n   * Switch tab.\n   *\n   * @returns {boolean}\n   */\n  switchTab() {\n    if (localStorage.getItem(this.storageKey)) {\n      // When moving from tab area to a different view\n      if (!this.hasTab(localStorage.getItem(this.storageKey))) {\n        localStorage.removeItem(this.storageKey);\n        return true;\n      }\n\n      // Clean default tabs\n      // u.selectOne(this.$element, '[data-toggle=\"tab\"], [data-bs-toggle=tab]')\n      // this.$element.querySelector('a[data-toggle=\"tab\"]').parent().removeClass('active');\n\n      const tabhref = localStorage.getItem(this.storageKey);\n\n      // Add active attribute for selected tab indicated by url\n      this.activateTab(tabhref);\n\n      // Check whether internal tab is selected (in format <tabname>-<id>)\n      // const seperatorIndex = tabhref.indexOf('-');\n      //\n      // if (seperatorIndex !== -1) {\n      //   const singular = tabhref.substring(0, seperatorIndex);\n      //   const plural = singular + 's';\n      //\n      //   this.activateTab(plural);\n      // }\n    }\n  }\n\n  /**\n   * Hash code.\n   *\n   * @param {String} text\n   *\n   * @returns {number}\n   */\n  hashCode(text) {\n    return u.md5(text);\n  }\n}\n"],"mappings":"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"}