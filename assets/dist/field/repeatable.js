(()=>{"use strict";const t=function(t,e){return t===e||t!=t&&e!=e},e=function(e,r){for(var n=e.length;n--;)if(t(e[n][0],r))return n;return-1};var r=Array.prototype.splice;function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}n.prototype.clear=function(){this.__data__=[],this.size=0},n.prototype.delete=function(t){var n=this.__data__,o=e(n,t);return!(o<0||(o==n.length-1?n.pop():r.call(n,o,1),--this.size,0))},n.prototype.get=function(t){var r=this.__data__,n=e(r,t);return n<0?void 0:r[n][1]},n.prototype.has=function(t){return e(this.__data__,t)>-1},n.prototype.set=function(t,r){var n=this.__data__,o=e(n,t);return o<0?(++this.size,n.push([t,r])):n[o][1]=r,this};const o=n,a="object"==typeof global&&global&&global.Object===Object&&global;var i="object"==typeof self&&self&&self.Object===Object&&self;const c=a||i||Function("return this")(),s=c.Symbol;var l=Object.prototype,f=l.hasOwnProperty,p=l.toString,b=s?s.toStringTag:void 0;var y=Object.prototype.toString;var h=s?s.toStringTag:void 0;const d=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":h&&h in Object(t)?function(t){var e=f.call(t,b),r=t[b];try{t[b]=void 0;var n=!0}catch(t){}var o=p.call(t);return n&&(e?t[b]=r:delete t[b]),o}(t):function(t){return y.call(t)}(t)},j=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},v=function(t){if(!j(t))return!1;var e=d(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},_=c["__core-js_shared__"];var m,g=(m=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"";var O=Function.prototype.toString;const A=function(t){if(null!=t){try{return O.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var w=/^\[object .+?Constructor\]$/,x=Function.prototype,I=Object.prototype,$=x.toString,E=I.hasOwnProperty,z=RegExp("^"+$.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const P=function(t){return!(!j(t)||(e=t,g&&g in e))&&(v(t)?z:w).test(A(t));var e},F=function(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return P(r)?r:void 0},U=F(c,"Map"),k=F(Object,"create");var D=Object.prototype.hasOwnProperty;var B=Object.prototype.hasOwnProperty;function M(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}M.prototype.clear=function(){this.__data__=k?k(null):{},this.size=0},M.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},M.prototype.get=function(t){var e=this.__data__;if(k){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return D.call(e,t)?e[t]:void 0},M.prototype.has=function(t){var e=this.__data__;return k?void 0!==e[t]:B.call(e,t)},M.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=k&&void 0===e?"__lodash_hash_undefined__":e,this};const N=M,T=function(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map};function R(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}R.prototype.clear=function(){this.size=0,this.__data__={hash:new N,map:new(U||o),string:new N}},R.prototype.delete=function(t){var e=T(this,t).delete(t);return this.size-=e?1:0,e},R.prototype.get=function(t){return T(this,t).get(t)},R.prototype.has=function(t){return T(this,t).has(t)},R.prototype.set=function(t,e){var r=T(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};const V=R;function C(t){var e=this.__data__=new o(t);this.size=e.size}C.prototype.clear=function(){this.__data__=new o,this.size=0},C.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},C.prototype.get=function(t){return this.__data__.get(t)},C.prototype.has=function(t){return this.__data__.has(t)},C.prototype.set=function(t,e){var r=this.__data__;if(r instanceof o){var n=r.__data__;if(!U||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new V(n)}return r.set(t,e),this.size=r.size,this};const L=C,q=function(){try{var t=F(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),W=function(t,e,r){"__proto__"==e&&q?q(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var K=Object.prototype.hasOwnProperty;const G=function(e,r,n){var o=e[r];K.call(e,r)&&t(o,n)&&(void 0!==n||r in e)||W(e,r,n)},H=function(t,e,r,n){var o=!r;r||(r={});for(var a=-1,i=e.length;++a<i;){var c=e[a],u=n?n(r[c],t[c],c,r,t):void 0;void 0===u&&(u=t[c]),o?W(r,c,u):G(r,c,u)}return r},J=function(t){return null!=t&&"object"==typeof t},Q=function(t){return J(t)&&"[object Arguments]"==d(t)};var X=Object.prototype,Y=X.hasOwnProperty,Z=X.propertyIsEnumerable;const tt=Q(function(){return arguments}())?Q:function(t){return J(t)&&Y.call(t,"callee")&&!Z.call(t,"callee")},et=Array.isArray;var rt="object"==typeof exports&&exports&&!exports.nodeType&&exports,nt=rt&&"object"==typeof module&&module&&!module.nodeType&&module,ot=nt&&nt.exports===rt?c.Buffer:void 0;const at=(ot?ot.isBuffer:void 0)||function(){return!1};var it=/^(?:0|[1-9]\d*)$/;const ct=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&it.test(t))&&t>-1&&t%1==0&&t<e},ut=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var st={};st["[object Float32Array]"]=st["[object Float64Array]"]=st["[object Int8Array]"]=st["[object Int16Array]"]=st["[object Int32Array]"]=st["[object Uint8Array]"]=st["[object Uint8ClampedArray]"]=st["[object Uint16Array]"]=st["[object Uint32Array]"]=!0,st["[object Arguments]"]=st["[object Array]"]=st["[object ArrayBuffer]"]=st["[object Boolean]"]=st["[object DataView]"]=st["[object Date]"]=st["[object Error]"]=st["[object Function]"]=st["[object Map]"]=st["[object Number]"]=st["[object Object]"]=st["[object RegExp]"]=st["[object Set]"]=st["[object String]"]=st["[object WeakMap]"]=!1;const lt=function(t){return function(e){return t(e)}};var ft="object"==typeof exports&&exports&&!exports.nodeType&&exports,pt=ft&&"object"==typeof module&&module&&!module.nodeType&&module,bt=pt&&pt.exports===ft&&a.process;const yt=function(){try{return pt&&pt.require&&pt.require("util").types||bt&&bt.binding&&bt.binding("util")}catch(t){}}();var ht=yt&&yt.isTypedArray;const dt=ht?lt(ht):function(t){return J(t)&&ut(t.length)&&!!st[d(t)]};var jt=Object.prototype.hasOwnProperty;const vt=function(t,e){var r=et(t),n=!r&&tt(t),o=!r&&!n&&at(t),a=!r&&!n&&!o&&dt(t),i=r||n||o||a,c=i?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=c.length;for(var s in t)!e&&!jt.call(t,s)||i&&("length"==s||o&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||ct(s,u))||c.push(s);return c};var _t=Object.prototype;const mt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||_t)},gt=function(t,e){return function(r){return t(e(r))}},Ot=gt(Object.keys,Object);var At=Object.prototype.hasOwnProperty;const wt=function(t){return null!=t&&ut(t.length)&&!v(t)},xt=function(t){return wt(t)?vt(t):function(t){if(!mt(t))return Ot(t);var e=[];for(var r in Object(t))At.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)};var St=Object.prototype.hasOwnProperty;const It=function(t){if(!j(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=mt(t),r=[];for(var n in t)("constructor"!=n||!e&&St.call(t,n))&&r.push(n);return r},$t=function(t){return wt(t)?vt(t,!0):It(t)};var Et="object"==typeof exports&&exports&&!exports.nodeType&&exports,zt=Et&&"object"==typeof module&&module&&!module.nodeType&&module,Pt=zt&&zt.exports===Et?c.Buffer:void 0,Ft=Pt?Pt.allocUnsafe:void 0;const Ut=function(){return[]};var kt=Object.prototype.propertyIsEnumerable,Dt=Object.getOwnPropertySymbols;const Bt=Dt?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,a=[];++r<n;){var i=t[r];e(i,r,t)&&(a[o++]=i)}return a}(Dt(t),(function(e){return kt.call(t,e)})))}:Ut,Mt=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},Nt=gt(Object.getPrototypeOf,Object),Tt=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Mt(e,Bt(t)),t=Nt(t);return e}:Ut,Rt=function(t,e,r){var n=e(t);return et(t)?n:Mt(n,r(t))},Vt=function(t){return Rt(t,xt,Bt)},Ct=function(t){return Rt(t,$t,Tt)},Lt=F(c,"DataView"),qt=F(c,"Promise"),Wt=F(c,"Set"),Kt=F(c,"WeakMap");var Gt="[object Map]",Ht="[object Promise]",Jt="[object Set]",Qt="[object WeakMap]",Xt="[object DataView]",Yt=A(Lt),Zt=A(U),te=A(qt),ee=A(Wt),re=A(Kt),ne=d;(Lt&&ne(new Lt(new ArrayBuffer(1)))!=Xt||U&&ne(new U)!=Gt||qt&&ne(qt.resolve())!=Ht||Wt&&ne(new Wt)!=Jt||Kt&&ne(new Kt)!=Qt)&&(ne=function(t){var e=d(t),r="[object Object]"==e?t.constructor:void 0,n=r?A(r):"";if(n)switch(n){case Yt:return Xt;case Zt:return Gt;case te:return Ht;case ee:return Jt;case re:return Qt}return e});const oe=ne;var ae=Object.prototype.hasOwnProperty;const ie=c.Uint8Array,ce=function(t){var e=new t.constructor(t.byteLength);return new ie(e).set(new ie(t)),e};var ue=/\w*$/;var se=s?s.prototype:void 0,le=se?se.valueOf:void 0;const fe=function(t,e,r){var n,o,a,i=t.constructor;switch(e){case"[object ArrayBuffer]":return ce(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return function(t,e){var r=e?ce(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var r=e?ce(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,r);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return(a=new(o=t).constructor(o.source,ue.exec(o))).lastIndex=o.lastIndex,a;case"[object Symbol]":return n=t,le?Object(le.call(n)):{}}};var pe=Object.create;const be=function(){function t(){}return function(e){if(!j(e))return{};if(pe)return pe(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var ye=yt&&yt.isMap;const he=ye?lt(ye):function(t){return J(t)&&"[object Map]"==oe(t)};var de=yt&&yt.isSet;const je=de?lt(de):function(t){return J(t)&&"[object Set]"==oe(t)};var ve="[object Arguments]",_e="[object Function]",me="[object Object]",ge={};ge[ve]=ge["[object Array]"]=ge["[object ArrayBuffer]"]=ge["[object DataView]"]=ge["[object Boolean]"]=ge["[object Date]"]=ge["[object Float32Array]"]=ge["[object Float64Array]"]=ge["[object Int8Array]"]=ge["[object Int16Array]"]=ge["[object Int32Array]"]=ge["[object Map]"]=ge["[object Number]"]=ge[me]=ge["[object RegExp]"]=ge["[object Set]"]=ge["[object String]"]=ge["[object Symbol]"]=ge["[object Uint8Array]"]=ge["[object Uint8ClampedArray]"]=ge["[object Uint16Array]"]=ge["[object Uint32Array]"]=!0,ge["[object Error]"]=ge[_e]=ge["[object WeakMap]"]=!1;const Oe=function t(e,r,n,o,a,i){var c,u=1&r,s=2&r,l=4&r;if(n&&(c=a?n(e,o,a,i):n(e)),void 0!==c)return c;if(!j(e))return e;var f=et(e);if(f){if(c=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&ae.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(e),!u)return function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(e,c)}else{var p=oe(e),b=p==_e||"[object GeneratorFunction]"==p;if(at(e))return function(t,e){if(e)return t.slice();var r=t.length,n=Ft?Ft(r):new t.constructor(r);return t.copy(n),n}(e,u);if(p==me||p==ve||b&&!a){if(c=s||b?{}:function(t){return"function"!=typeof t.constructor||mt(t)?{}:be(Nt(t))}(e),!u)return s?function(t,e){return H(t,Tt(t),e)}(e,function(t,e){return t&&H(e,$t(e),t)}(c,e)):function(t,e){return H(t,Bt(t),e)}(e,function(t,e){return t&&H(e,xt(e),t)}(c,e))}else{if(!ge[p])return a?e:{};c=fe(e,p,u)}}i||(i=new L);var y=i.get(e);if(y)return y;i.set(e,c),je(e)?e.forEach((function(o){c.add(t(o,r,n,o,e,i))})):he(e)&&e.forEach((function(o,a){c.set(a,t(o,r,n,a,e,i))}));var h=f?void 0:(l?s?Ct:Vt:s?$t:xt)(e);return function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););}(h||e,(function(o,a){h&&(o=e[a=o]),G(c,a,t(o,r,n,a,e,i))})),c},Ae={hasKey:!1,singleArray:!1};function we(t){return null==t.uid&&(t.uid=u.uid()),t}S.import("@main").then((()=>{u.importCSS("@vue2-animate"),u.prepareAlpine((()=>{Alpine.data("RepeatableField",((t,e)=>{let{items:r,defaultValues:n,attrs:o}=t;return{items:r,defaultValues:n,attrs:o,options:u.defaultsDeep(e,Ae),init(){this.options.sortable&&u.import("@sortablejs").then((()=>{Sortable.create(this.$refs.tbody,{handle:".h-handle",animation:300,onEnd:t=>{const e=Alpine.raw(this.items),r=e.splice(t.oldIndex,1)[0];e.splice(t.newIndex,0,r),this.items=e;let n=[];for(let t of e)n.push(t.uid);this.$refs.steps_template._x_prevKeys=n;const o=this.$refs.steps_template.parentElement.querySelectorAll("tr");[].slice.call(o).forEach(((t,e)=>{var r;null!=(null==t||null===(r=t._x_dataStack[0])||void 0===r?void 0:r.i)&&(t._x_dataStack[0].i=e)}))}})})),r.forEach((t=>{we(t)})),this.options.ensureFirstRow&&this.makeSureDefaultItem()},addItem(t){const e=we(this.getEmptyItem());this.items.splice(t+1,0,e)},delItem(t){const e=this.getItemElementByUID(this.items[t].uid);e.classList.add("fadeOut"),e.addEventListener("animationend",(()=>{this.items.splice(t,1),this.options.ensureFirstRow&&this.makeSureDefaultItem()}))},makeSureDefaultItem(){0===this.items.length&&this.items.push(we(this.getEmptyItem()))},getItemElementByUID(t){return this.$root.querySelector(`[data-item="${t}"]`)},getId(t,e,r){return`${this.id}-${e.uid}-${r}`},getName(t,e,r){return this.options.singleArray?this.options.hasKey?"key"===r?"":`${this.fieldName}[${e.key}]`:`${this.fieldName}[]`:`${this.fieldName}[${t}][${r}]`},getEmptyItem(){return t=this.defaultValues,Oe(t,5);var t},get canAdd(){return!this.options.max||this.options.max>this.items},get canModify(){return null==this.attrs.disabled&&null==this.attrs.readonly},get fieldName(){return this.options.fieldName},get id(){return this.options.id}}}))})),u.loadAlpine()}))})();
//# sourceMappingURL=repeatable.js.map