!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.IframeModal=t():e.IframeModal=t()}(self,(()=>(()=>{"use strict";var e={d:(t,i)=>{for(var o in i)e.o(i,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:i[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{IFrameModal:()=>i});class i extends HTMLElement{static is="uni-iframe-modal";options;modalElement;modal;iframe;template(){return`\n<div class="modal fade c-unicorn-iframe-modal" id="${this.getModalId()}"\n    data-iframe-modal>\n    <div class="modal-dialog ${this.options?.size||"modal-xl"}">\n        <div class="modal-content">\n            <div class="modal-body">\n                <iframe class="c-unicorn-iframe-modal__iframe" width="100%" src="" frameborder="0"></iframe>\n            </div>\n        </div>\n    </div>\n</div>`}get selector(){return this.getAttribute("selector")||"[data-iframe-modal]"}connectedCallback(){this.options=JSON.parse(this.getAttribute("options")||"{}"),this.innerHTML.trim()||(this.innerHTML=this.template()),this.modalElement=this.querySelector(this.selector),this.modal=u.$ui.bootstrap.modal(this.modalElement),this.iframe=this.modalElement.querySelector("iframe"),this.iframe.modalLink=()=>this,this.bindEvents()}bindEvents(){this.modalElement.addEventListener("hidden.bs.modal",(()=>{this.iframe.src=""}))}open(e,t={}){if((t=u.defaultsDeep(t,this.options,{height:null,resize:!1,size:"modal-lg"})).resize){let e;this.iframe.addEventListener("load",e=()=>{this.resize(this.iframe),this.iframe.removeEventListener("load",e)})}else this.iframe.style.height=t.height||"500px";if(null!=t.size){const e=this.modalElement.querySelector(".modal-dialog");e.classList.remove("modal-lg","modal-xl","modal-sm","modal-xs"),e.classList.add(t.size)}this.iframe.src=e,this.modal.show()}close(){this.modal.hide(),this.iframe.src=""}resize(e){setTimeout((()=>{let t=e.contentWindow.document.documentElement.scrollHeight;t+=30,t<500&&(t=500),e.style.height=t+"px"}),30)}getModalId(){return this.options?.id||this.id+"__modal"}}return u.defineCustomElement(i.is,i),u.directive("modal-link",{mounted(e,t){let i={};i.height=e.dataset.height,i.resize=e.dataset.resize,i.size=e.dataset.size;const o=t.value;e.style.pointerEvents=null,e.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation();const s=document.querySelector(o);s&&("src"in e?s.open(e.src,i):"href"in e&&s.open(e.href,i))}))}}),t})()));
//# sourceMappingURL=main.js.map