!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){"use strict";function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.r(e),i.d(e,"UnicornFormValidation",(function(){return f}));var d={},f=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,t),l(this,"presetFields",[]),l(this,"validators",{}),l(this,"$form",void 0),this.$form=u.selectOne(e),this.options=i,this.registerDefaultValidators(),this.init()}return o(t,[{key:"scrollEnabled",get:function(){return!0===this.options.scroll}},{key:"scrollOffset",get:function(){return Number(this.options.scrollOffset||-100)}},{key:"fieldSelector",get:function(){return this.options.fieldSelector||"input, select, textarea"}},{key:"validatedClass",get:function(){return this.options.validatedClass||"was-validated"}},{key:"init",value:function(){var t=this;"FORM"===this.$form.tagName&&(this.$form.setAttribute("novalidate",!0),this.$form.addEventListener("submit",(function(e){return!!t.validateAll()||(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),!1)}),!1)),this.prepareFields(this.findDOMFields()),this.prepareFields(this.presetFields)}},{key:"findDOMFields",value:function(){return u.selectAll(this.$form.querySelectorAll(this.fieldSelector))}},{key:"prepareFields",value:function(t){var e=this;return t=t.forEach((function(t){e.prepareFieldWrapper(t)})),Promise.resolve()}},{key:"prepareFieldWrapper",value:function(t){if(-1!==["INPUT","SELECT","TEXTAREA"].indexOf(t.tagName)){var e=t.closest(".form-group, [uni-field-validate]");return e&&!e.getAttribute("uni-field-validate")&&e.setAttribute("uni-field-validate","{}"),e}return t}},{key:"findFields",value:function(){var t,e=this,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=this.findDOMFields();i&&(t=r).push.apply(t,n(this.presetFields));return(r=r.map((function(t){return e.prepareFieldWrapper(t)}))).filter((function(t){return null!=t}))}},{key:"validateAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.markFormAsUnvalidated(),t=t||this.findFields();var e=null;return t.forEach((function(t){var i=u.getBoundedInstance(t,"field.validation");i&&(i.checkValidity()||e||(e=t))})),this.markFormAsValidated(),e&&this.scrollEnabled&&this.scrollTo(e),null===e}},{key:"scrollTo",value:function(t){var e=this.scrollOffset,i=t.getBoundingClientRect().top+window.pageYOffset+e;window.scrollTo({top:i,behavior:"smooth"})}},{key:"markFormAsValidated",value:function(){this.$form&&this.$form.classList.add(this.validatedClass)}},{key:"markFormAsUnvalidated",value:function(){this.$form&&this.$form.classList.remove(this.validatedClass)}},{key:"addField",value:function(t){return this.presetFields.push(t),this.prepareFieldWrapper(t),this}},{key:"registerDefaultValidators",value:function(){for(var t in d)d.hasOwnProperty(t)&&this.addValidator(t,d[t])}},{key:"addValidator",value:function(t,e,i){return i=i||{},this.validators[t]={handler:e,options:i},this}}]),t}();l(f,"is","uni-form-validate");var c=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,t),l(this,"$input",void 0),this.el=e,this.options=i,this.init()}return o(t,[{key:"$form",get:function(){return this.getForm()}},{key:"errorSelector",get:function(){return this.options.errorSelector||"[data-field-error]"}},{key:"selector",get:function(){return this.options.selector||"input, select, textarea"}},{key:"validClass",get:function(){return this.options.validClass||"is-valid"}},{key:"invalidClass",get:function(){return this.options.invalidClass||"is-invalid"}},{key:"isVisible",get:function(){return!!(this.$input.offsetWidth||this.$input.offsetHeight||this.$input.getClientRects().length)}},{key:"selectInput",value:function(){return this.$input=this.el.querySelector(this.selector)}},{key:"init",value:function(){this.selectInput(),this.bindEvents(),this.prepareWrapper()}},{key:"bindEvents",value:function(){var t=this;this.$input&&(this.$input.addEventListener("invalid",(function(e){t.showInvalidResponse()})),(this.options.events||["change"]).forEach((function(e){t.$input.addEventListener(e,(function(){t.checkValidity()}))})))}},{key:"prepareWrapper",value:function(){var t,e;null!==(t=this.el.querySelector(this.errorSelector))&&void 0!==t&&null!==(e=t.classList)&&void 0!==e&&e.contains("invalid-tooltip")&&"static"===window.getComputedStyle(this.el).position&&(this.el.style.position="relative")}},{key:"checkValidity",value:function(){if(!this.$input)return!0;this.$input.classList.remove(this.invalidClass),this.$input.classList.remove(this.validClass),this.$input.setCustomValidity(""),this.$form&&this.runCustomValidity();var t=this.$input.checkValidity();return t?this.$input.classList.add(this.validClass):this.$input.classList.add(this.invalidClass),t}},{key:"runCustomValidity",value:function(){var t,e=(this.$input.getAttribute("data-validate")||"").split("|"),i=!0,n=u.getBoundedInstance(this.$form,"form.validation");if(""!==this.$input.value&&e.length)for(var r in e){var a=n.validators[e[r]];if(a&&!a.handler(this.$input.value,this.$input)){"function"==typeof(t=a.options.notice)&&(t=t(this.$input,this)),null!=t&&this.$input.setCustomValidity(t),""===this.$input.validationMessage&&this.$input.setCustomValidity("Value type mismatch"),i=!1;break}}return i}},{key:"showInvalidResponse",value:function(){if(!this.isVisible){var t,e=null===(t=this.findLabel())||void 0===t?void 0:t.textContent;e||(e=this.$input.name),u.addMessage("Field: ".concat(e," - ").concat(this.$input.validationMessage),"warning")}var i=this.el.querySelector(this.errorSelector);i||(i=this.createHelpElement(),this.el.appendChild(i),this.prepareWrapper()),i.textContent=this.$input.validationMessage}},{key:"createHelpElement",value:function(){var t,e=this.options.errorMessageClass||"invalid-tooltip",i=this.parseSelector(this.errorSelector),r=u.html('<div class="'.concat(e,'"></div>'));return(t=r.classList).add.apply(t,n(i.classes)),i.attrs.forEach((function(t){r.setAttribute(t[0],t[1]||"")})),i.ids.forEach((function(t){r.id=t})),r}},{key:"parseSelector",value:function(t){var e={tags:[],classes:[],ids:[],attrs:[]};return t.split(/(?=\.)|(?=#)|(?=\[)/).forEach((function(t){switch(t[0]){case"#":e.ids.push(t.slice(1));break;case".":e.classes.push(t.slice(1));break;case"[":e.attrs.push(t.slice(1,-1).split("="));break;default:e.tags.push(t)}})),e}},{key:"clearInvalidResponse",value:function(){this.el.querySelector(this.errorSelector).textContent=""}},{key:"getForm",value:function(){return this.el.closest(this.options.formSelector||"[uni-form-validate]")}},{key:"findLabel",value:function(){var t=this.$input.id,e=this.$input.closest("[data-field-wrapper]"),i=null;return e&&(i=e.querySelector("[data-field-label]")),i||(i=document.querySelector('label[for="'.concat(t,'"]'))),i}}]),t}();l(c,"is","uni-field-validate"),u.directive("form-validate",{mounted:function(t,e){u.getBoundedInstance(t,"form.validation",(function(t){return new f(t,JSON.parse(e.value||"{}"))}))},updated:function(t,e){u.getBoundedInstance(t,"form.validation").options=JSON.parse(e.value||"{}")}}),u.directive("field-validate",{mounted:function(t,e){u.getBoundedInstance(t,"field.validation",(function(t){return new c(t,JSON.parse(e.value||"{}"))}))},updated:function(t,e){u.getBoundedInstance(t,"field.validation").options=JSON.parse(e.value||"{}")}}),d.username=function(t,e){return!new RegExp("[<|>|\"|'|%|;|(|)|&]","i").test(t)},d.numeric=function(t,e){return/^(\d|-)?(\d|,)*\.?\d*$/.test(t)},d.email=function(t,e){t=punycode.toASCII(t);return/^[a-zA-Z0-9.!#$%&â€™*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(t)},d.url=function(t,e){return/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i.test(t)},d.alnum=function(t,e){return/^[a-zA-Z0-9]*$/.test(t)},d.color=function(t,e){return/^#(?:[0-9a-f]{3}){1,2}$/.test(t)},d.creditcard=function(t,e){return/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6011[0-9]{12}|622((12[6-9]|1[3-9][0-9])|([2-8][0-9][0-9])|(9(([0-1][0-9])|(2[0-5]))))[0-9]{10}|64[4-9][0-9]{13}|65[0-9]{14}|3(?:0[0-5]|[68][0-9])[0-9]{11}|3[47][0-9]{13})*$/.test(t)},d.ip=function(t,e){return/^((?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))*$/.test(t)},d["password-confirm"]=function(t,e){var i=e.attr("data-confirm-target");return $(i).val()===t}}])}));
//# sourceMappingURL=validation-components.js.map