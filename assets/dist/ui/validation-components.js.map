{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/modules/ui/validation-components.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","handlers","UnicornFormValidation","el","options","this","$form","registerDefaultValidators","init","scroll","Number","scrollOffset","fieldSelector","validatedClass","tagName","setAttribute","addEventListener","event","validateAll","stopImmediatePropagation","stopPropagation","preventDefault","containsPresets","inputs","u","selectAll","querySelectorAll","push","presetFields","fields","markFormAsUnvalidated","findFields","firstFail","forEach","field","getBoundedInstance","checkValidity","markFormAsValidated","scrollEnabled","scrollTo","element","offset","offsetPosition","getBoundingClientRect","top","pageYOffset","behavior","classList","add","remove","addValidator","validator","validators","handler","UnicornFieldValidation","getForm","errorSelector","selector","validClass","invalidClass","$input","offsetWidth","offsetHeight","getClientRects","length","querySelector","selectInput","bindEvents","contains","getComputedStyle","position","style","e","showInvalidResponse","eventName","setCustomValidity","runCustomValidity","valid","help","validates","getAttribute","split","result","fv","notice","validationMessage","isVisible","title","findLabel","textContent","addMessage","closest","id","wrapper","label","document","directive","mounted","binding","ele","JSON","parse","updated","username","RegExp","test","numeric","email","punycode","toASCII","url","alnum","color","creditcard","ip","attr","$","val"],"mappings":"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","file":"validation-components.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","   \r\n                           \r\n  \r\n                                                   \r\n                          \r\n   \r\n\r\n   \r\n                   \r\n  \r\n                 \r\n   \r\nconst handlers = {};\r\n\r\nclass UnicornFormValidation {\r\n  presetFields = [];\r\n  validators = {};\r\n  $form;\r\n\r\n  static is = 'uni-form-validate';\r\n\r\n  constructor(el, options = {}) {\r\n    this.$form = el;\r\n    this.options = options;\r\n\r\n    this.registerDefaultValidators();\r\n\r\n    this.init();\r\n  }\r\n\r\n  get scrollEnabled() {\r\n    return this.options.scroll === true;\r\n  }\r\n\r\n  get scrollOffset() {\r\n    return Number(this.options.scrollOffset || -100);\r\n  }\r\n\r\n  get fieldSelector() {\r\n    return this.options.fieldSelector || '[uni-field-validate]';\r\n  }\r\n\r\n  get validatedClass() {\r\n    return this.options.validatedClass || 'was-validated';\r\n  }\r\n\r\n  init() {\r\n    if (this.$form.tagName === 'FORM') {\r\n      this.$form.setAttribute('novalidate', true);\r\n      this.$form.addEventListener('submit', (event) => {\r\n        if (!this.validateAll()) {\r\n          event.stopImmediatePropagation();                         \r\n          event.stopPropagation();\r\n          event.preventDefault();\r\n\r\n          return false;\r\n        }\r\n\r\n        return true;\r\n      }, false);\r\n    }\r\n  }\r\n\r\n  findFields(containsPresets = true) {\r\n    const inputs = u.selectAll(this.$form.querySelectorAll(this.fieldSelector));\r\n\r\n    if (containsPresets) {\r\n      inputs.push(...this.presetFields);\r\n    }\r\n\r\n    return inputs;\r\n  }\r\n\r\n  validateAll(fields = null) {\r\n    this.markFormAsUnvalidated();\r\n\r\n    fields = fields || this.findFields();\r\n    let firstFail = null;\r\n\r\n    fields.forEach((field) => {\r\n      const fv = u.getBoundedInstance(field, 'field.validation');\r\n      const result = fv.checkValidity();\r\n\r\n      if (!result && !firstFail) {\r\n        firstFail = field;\r\n      }\r\n    });\r\n\r\n    this.markFormAsValidated();\r\n\r\n    if (firstFail && this.scrollEnabled) {\r\n      this.scrollTo(firstFail)\r\n    }\r\n\r\n    return firstFail === null;\r\n  }\r\n\r\n  scrollTo(element) {\r\n    const offset = this.scrollOffset;\r\n    const elementPosition = element.getBoundingClientRect().top;\r\n    const offsetPosition = elementPosition + window.pageYOffset + offset;\r\n\r\n    window.scrollTo({\r\n      top: offsetPosition,\r\n      behavior: 'smooth'\r\n    });\r\n  }\r\n\r\n  markFormAsValidated() {\r\n    if (!this.$form) {\r\n      return;\r\n    }\r\n\r\n    this.$form.classList.add(this.validatedClass);\r\n  }\r\n\r\n  markFormAsUnvalidated() {\r\n    if (!this.$form) {\r\n      return;\r\n    }\r\n\r\n    this.$form.classList.remove(this.validatedClass);\r\n  }\r\n\r\n  addField(field) {\r\n    this.presetFields.push(field);\r\n    return this;\r\n  }\r\n\r\n  registerDefaultValidators() {\r\n    for (let name in handlers) {\r\n      if (handlers.hasOwnProperty(name)) {\r\n        this.addValidator(name, handlers[name]);\r\n      }\r\n    }\r\n  }\r\n\r\n     \r\n                           \r\n    \r\n                \r\n                     \r\n                   \r\n                                          \r\n     \r\n  addValidator(name, validator, options) {\r\n    options = options || {};\r\n\r\n    this.validators[name] = {\r\n      handler: validator,\r\n      options: options\r\n    };\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nclass UnicornFieldValidation {\r\n  $input;\r\n\r\n  static is = 'uni-field-validate';\r\n\r\n  constructor(el, options = {}) {\r\n    this.el = el;\r\n    this.options = options;\r\n\r\n    this.init();\r\n  }\r\n\r\n  get $form() {\r\n    return this.getForm();\r\n  }\r\n\r\n  get errorSelector() {\r\n    return this.options.errorSelector || '[data-field-error]';\r\n  }\r\n\r\n  get selector() {\r\n    return this.options.selector || 'input, select, textarea';\r\n  }\r\n\r\n  get validClass() {\r\n    return this.options.validClass || 'is-valid';\r\n  }\r\n\r\n  get invalidClass() {\r\n    return this.options.invalidClass || 'is-invalid';\r\n  }\r\n\r\n  get isVisible() {\r\n    return !!(this.$input.offsetWidth || this.$input.offsetHeight || this.$input.getClientRects().length);\r\n  }\r\n\r\n  selectInput() {\r\n    return this.$input = this.el.querySelector(this.selector);\r\n  }\r\n\r\n  init() {\r\n    this.selectInput();\r\n\r\n    this.bindEvents();\r\n\r\n    if (this.el.querySelector(this.errorSelector)?.classList?.contains('invalid-tooltip')) {\r\n      if (window.getComputedStyle(this.el).position === 'static') {\r\n        this.el.style.position = 'relative';\r\n      }\r\n    }\r\n  }\r\n\r\n  bindEvents() {\r\n    if (!this.$input) {\r\n      return;\r\n    }\r\n\r\n    this.$input.addEventListener('invalid', (e) => {\r\n      this.showInvalidResponse();\r\n    });\r\n\r\n    const events = this.options['events'] || ['change'];\r\n\r\n    events.forEach((eventName) => {\r\n        this.$input.addEventListener(eventName, () => {\r\n          this.checkValidity();\r\n        });\r\n      });\r\n  }\r\n\r\n  checkValidity() {\r\n    if (!this.$input) {\r\n      return true;\r\n    }\r\n\r\n    this.$input.classList.remove(this.invalidClass);\r\n    this.$input.classList.remove(this.validClass);\r\n\r\n    this.$input.setCustomValidity('');\r\n\r\n    if (this.$form) {\r\n      this.runCustomValidity();\r\n    }\r\n\r\n    const valid = this.$input.checkValidity();\r\n\r\n    if (valid) {\r\n      this.$input.classList.add(this.validClass);\r\n    } else {\r\n      this.$input.classList.add(this.invalidClass);\r\n    }\r\n\r\n    return valid;\r\n  }\r\n\r\n  runCustomValidity() {\r\n                            \r\n    const validates = (this.$input.getAttribute('data-validate') || '').split('|');\r\n    let help;\r\n    let result = true;\r\n    const fv = u.getBoundedInstance(this.$form, 'form.validation');\r\n\r\n    if (this.$input.value !== '' && validates.length) {\r\n      for (let i in validates) {\r\n        const validator = fv.validators[validates[i]];\r\n        if (validator && !validator.handler(this.$input.value, this.$input)) {\r\n          help = validator.options.notice;\r\n\r\n          if (typeof help === 'function') {\r\n            help = help(this.$input, this);\r\n          }\r\n\r\n          if (help != null) {\r\n            this.$input.setCustomValidity(help);\r\n          }\r\n\r\n          if (this.$input.validationMessage === '') {\r\n            this.$input.setCustomValidity('Value type mismatch');\r\n          }\r\n\r\n          result = false;\r\n\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  showInvalidResponse() {\r\n    if (!this.isVisible) {\r\n      let title = this.findLabel()?.textContent;\r\n\r\n      if (!title) {\r\n        title = this.$input.name;\r\n      }\r\n\r\n      u.addMessage(\r\n        `Field: ${title} - ${this.$input.validationMessage}`,\r\n        'warning'\r\n      );\r\n    }\r\n\r\n    const $help = this.el.querySelector(this.errorSelector);\r\n\r\n    $help.textContent = this.$input.validationMessage;\r\n  }\r\n\r\n  clearInvalidResponse() {\r\n    const $help = this.el.querySelector(this.errorSelector);\r\n\r\n    $help.textContent = '';\r\n  }\r\n\r\n  getForm() {\r\n    return this.el.closest(this.options['formSelector'] || '[uni-form-validate]');\r\n  }\r\n\r\n  findLabel() {\r\n    const id = this.$input.id;\r\n\r\n    const wrapper = this.$input.closest('[data-field-wrapper]');\r\n    let label = null;\r\n\r\n    if (wrapper) {\r\n      label = wrapper.querySelector('[data-field-label]');\r\n    }\r\n\r\n    if (!label) {\r\n      label = document.querySelector(`label[for=\"${id}\"]`);\r\n    }\r\n\r\n    return label;\r\n  }\r\n}\r\n\r\nu.directive('form-validate', {\r\n  mounted(el, binding) {\r\n    u.getBoundedInstance(el, 'form.validation', (ele) => {\r\n      return new UnicornFormValidation(ele, JSON.parse(binding.value || '{}'));\r\n    });\r\n  },\r\n  updated(el, binding) {\r\n    const instance = u.getBoundedInstance(el, 'form.validation');\r\n    instance.options = JSON.parse(binding.value || '{}');\r\n  }\r\n});\r\n\r\nu.directive('field-validate', {\r\n  mounted(el, binding) {\r\n    u.getBoundedInstance(el, 'field.validation', (ele) => {\r\n      return new UnicornFieldValidation(ele, JSON.parse(binding.value || '{}'));\r\n    });\r\n  },\r\n\r\n  updated(el, binding) {\r\n    const instance = u.getBoundedInstance(el, 'field.validation');\r\n    instance.options = JSON.parse(binding.value || '{}');\r\n  }\r\n});\r\n\r\nfunction camelTo(str, sep) {\r\n  return str.replace(/([a-z])([A-Z])/g, `$1${sep}$2`).toLowerCase();\r\n}\r\n\r\nhandlers.username = function(value, element) {\r\n  const regex = new RegExp(\"[\\<|\\>|\\\"|\\'|\\%|\\;|\\(|\\)|\\&]\", \"i\");\r\n  return !regex.test(value);\r\n};\r\n\r\nhandlers.numeric = function(value, element) {\r\n  const regex = /^(\\d|-)?(\\d|,)*\\.?\\d*$/;\r\n  return regex.test(value);\r\n};\r\n\r\nhandlers.email = function(value, element) {\r\n  value = punycode.toASCII(value);\r\n  const regex = /^[a-zA-Z0-9.!#$%&â€™*+\\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\r\n  return regex.test(value);\r\n};\r\n\r\nhandlers.url = function(value, element) {\r\n  const regex = /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/i;\r\n  return regex.test(value);\r\n};\r\n\r\nhandlers.alnum = function(value, element) {\r\n  const regex = /^[a-zA-Z0-9]*$/;\r\n  return regex.test(value);\r\n};\r\n\r\nhandlers.color = function(value, element) {\r\n  const regex = /^#(?:[0-9a-f]{3}){1,2}$/;\r\n  return regex.test(value);\r\n};\r\n\r\n   \r\n                                                                                                   \r\n   \r\nhandlers.creditcard = function(value, element) {\r\n  const regex = /^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6011[0-9]{12}|622((12[6-9]|1[3-9][0-9])|([2-8][0-9][0-9])|(9(([0-1][0-9])|(2[0-5]))))[0-9]{10}|64[4-9][0-9]{13}|65[0-9]{14}|3(?:0[0-5]|[68][0-9])[0-9]{11}|3[47][0-9]{13})*$/;\r\n  return regex.test(value);\r\n};\r\n\r\nhandlers.ip = function(value, element) {\r\n  const regex = /^((?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))*$/;\r\n  return regex.test(value);\r\n};\r\n\r\nhandlers['password-confirm'] = function (value, element) {\r\n  const selector = element.attr('data-confirm-target');\r\n  const target = $(selector);\r\n\r\n  return target.val() === value;\r\n};\r\n\r\n                                                                                    \r\n                                                                                      \r\n"],"sourceRoot":""}