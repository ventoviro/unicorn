{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/modules/ui/validation-components.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","handlers","UnicornFormValidation","el","options","this","$form","u","selectOne","registerDefaultValidators","init","scroll","Number","scrollOffset","fieldSelector","validatedClass","tagName","setAttribute","addEventListener","event","validateAll","stopImmediatePropagation","stopPropagation","preventDefault","prepareFields","findDOMFields","presetFields","selectAll","querySelectorAll","inputs","forEach","input","prepareFieldWrapper","Promise","resolve","indexOf","wrapper","closest","getAttribute","containsPresets","push","map","filter","fields","markFormAsUnvalidated","findFields","firstFail","field","fv","getBoundedInstance","checkValidity","markFormAsValidated","scrollEnabled","scrollTo","element","offset","offsetPosition","getBoundingClientRect","top","pageYOffset","behavior","classList","add","remove","addValidator","validator","validators","handler","UnicornFieldValidation","getForm","errorSelector","selector","validClass","invalidClass","$input","offsetWidth","offsetHeight","getClientRects","length","querySelector","selectInput","bindEvents","prepareWrapper","e","showInvalidResponse","eventName","contains","getComputedStyle","position","style","setCustomValidity","runCustomValidity","valid","help","validates","split","result","notice","validationMessage","isVisible","title","findLabel","textContent","addMessage","$help","createHelpElement","appendChild","className","errorMessageClass","parsed","parseSelector","html","classes","attrs","attr","ids","id","subselector","obj","tags","token","slice","label","document","directive","mounted","binding","ele","JSON","parse","updated","username","RegExp","test","numeric","email","punycode","toASCII","url","alnum","color","creditcard","ip","$","val"],"mappings":"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","file":"validation-components.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","   \n                           \n  \n                                                   \n                          \n   \n\n   \n                   \n  \n                 \n   \nconst handlers = {};\n\nexport class UnicornFormValidation {\n  presetFields = [];\n  validators = {};\n  $form;\n\n  static is = 'uni-form-validate';\n\n  constructor(el, options = {}) {\n    this.$form = u.selectOne(el);\n    this.options = options;\n\n    this.registerDefaultValidators();\n\n    this.init();\n  }\n\n  get scrollEnabled() {\n    return this.options.scroll === true;\n  }\n\n  get scrollOffset() {\n    return Number(this.options.scrollOffset || -100);\n  }\n\n  get fieldSelector() {\n    return this.options.fieldSelector || 'input, select, textarea';\n  }\n\n  get validatedClass() {\n    return this.options.validatedClass || 'was-validated';\n  }\n\n  init() {\n    if (this.$form.tagName === 'FORM') {\n      this.$form.setAttribute('novalidate', true);\n      this.$form.addEventListener('submit', (event) => {\n        if (!this.validateAll()) {\n          event.stopImmediatePropagation();                         \n          event.stopPropagation();\n          event.preventDefault();\n\n          return false;\n        }\n\n        return true;\n      }, false);\n    }\n\n    this.prepareFields(this.findDOMFields());\n    this.prepareFields(this.presetFields);\n  }\n\n  findDOMFields() {\n    return u.selectAll(this.$form.querySelectorAll(this.fieldSelector));\n  }\n\n  prepareFields(inputs) {\n    inputs = inputs.forEach((input) => {\n      this.prepareFieldWrapper(input);\n    });\n\n                     \n    return Promise.resolve();\n  }\n\n  prepareFieldWrapper(input) {\n    if (['INPUT', 'SELECT', 'TEXTAREA'].indexOf(input.tagName) !== -1) {\n      const wrapper = input.closest('.form-group, [uni-field-validate]');\n\n      if (wrapper && !wrapper.getAttribute('uni-field-validate')) {\n        wrapper.setAttribute('uni-field-validate', '{}');\n      }\n\n      return wrapper;\n    }\n\n    return input;\n  }\n\n  findFields(containsPresets = true) {\n    let inputs = this.findDOMFields();\n\n    if (containsPresets) {\n      inputs.push(...this.presetFields);\n    }\n\n    inputs = inputs.map((input) => {\n      return this.prepareFieldWrapper(input);\n    });\n\n    return inputs.filter(input => input != null);\n  }\n\n  validateAll(fields = null) {\n    this.markFormAsUnvalidated();\n\n    fields = fields || this.findFields();\n    let firstFail = null;\n\n    fields.forEach((field) => {\n      const fv = u.getBoundedInstance(field, 'field.validation');\n\n      if (!fv) {\n        return;\n      }\n\n      const result = fv.checkValidity();\n\n      if (!result && !firstFail) {\n        firstFail = field;\n      }\n    });\n\n    this.markFormAsValidated();\n\n    if (firstFail && this.scrollEnabled) {\n      this.scrollTo(firstFail)\n    }\n\n    return firstFail === null;\n  }\n\n  scrollTo(element) {\n    const offset = this.scrollOffset;\n    const elementPosition = element.getBoundingClientRect().top;\n    const offsetPosition = elementPosition + window.pageYOffset + offset;\n\n    window.scrollTo({\n      top: offsetPosition,\n      behavior: 'smooth'\n    });\n  }\n\n  markFormAsValidated() {\n    if (!this.$form) {\n      return;\n    }\n\n    this.$form.classList.add(this.validatedClass);\n  }\n\n  markFormAsUnvalidated() {\n    if (!this.$form) {\n      return;\n    }\n\n    this.$form.classList.remove(this.validatedClass);\n  }\n\n  addField(field) {\n    this.presetFields.push(field);\n\n    this.prepareFieldWrapper(field);\n\n    return this;\n  }\n\n  registerDefaultValidators() {\n    for (let name in handlers) {\n      if (handlers.hasOwnProperty(name)) {\n        this.addValidator(name, handlers[name]);\n      }\n    }\n  }\n\n     \n                           \n    \n                \n                     \n                   \n                                          \n     \n  addValidator(name, validator, options) {\n    options = options || {};\n\n    this.validators[name] = {\n      handler: validator,\n      options: options\n    };\n\n    return this;\n  }\n}\n\nclass UnicornFieldValidation {\n  $input;\n\n  static is = 'uni-field-validate';\n\n  constructor(el, options = {}) {\n    this.el = el;\n    this.options = options;\n\n    this.init();\n  }\n\n  get $form() {\n    return this.getForm();\n  }\n\n  get errorSelector() {\n    return this.options.errorSelector || '[data-field-error]';\n  }\n\n  get selector() {\n    return this.options.selector || 'input, select, textarea';\n  }\n\n  get validClass() {\n    return this.options.validClass || 'is-valid';\n  }\n\n  get invalidClass() {\n    return this.options.invalidClass || 'is-invalid';\n  }\n\n  get isVisible() {\n    return !!(this.$input.offsetWidth || this.$input.offsetHeight || this.$input.getClientRects().length);\n  }\n\n  selectInput() {\n    return this.$input = this.el.querySelector(this.selector);\n  }\n\n  init() {\n    this.selectInput();\n\n    this.bindEvents();\n\n    this.prepareWrapper();\n  }\n\n  bindEvents() {\n    if (!this.$input) {\n      return;\n    }\n\n    this.$input.addEventListener('invalid', (e) => {\n      this.showInvalidResponse();\n    });\n\n    const events = this.options['events'] || ['change'];\n\n    events.forEach((eventName) => {\n        this.$input.addEventListener(eventName, () => {\n          this.checkValidity();\n        });\n      });\n  }\n\n  prepareWrapper() {\n    if (this.el.querySelector(this.errorSelector)?.classList?.contains('invalid-tooltip')) {\n      if (window.getComputedStyle(this.el).position === 'static') {\n        this.el.style.position = 'relative';\n      }\n    }\n  }\n\n  checkValidity() {\n    if (!this.$input) {\n      return true;\n    }\n\n    this.$input.classList.remove(this.invalidClass);\n    this.$input.classList.remove(this.validClass);\n\n    this.$input.setCustomValidity('');\n\n    if (this.$form) {\n      this.runCustomValidity();\n    }\n\n    const valid = this.$input.checkValidity();\n\n    if (valid) {\n      this.$input.classList.add(this.validClass);\n    } else {\n      this.$input.classList.add(this.invalidClass);\n    }\n\n    return valid;\n  }\n\n  runCustomValidity() {\n                            \n    const validates = (this.$input.getAttribute('data-validate') || '').split('|');\n    let help;\n    let result = true;\n    const fv = u.getBoundedInstance(this.$form, 'form.validation');\n\n    if (this.$input.value !== '' && validates.length) {\n      for (let i in validates) {\n        const validator = fv.validators[validates[i]];\n        if (validator && !validator.handler(this.$input.value, this.$input)) {\n          help = validator.options.notice;\n\n          if (typeof help === 'function') {\n            help = help(this.$input, this);\n          }\n\n          if (help != null) {\n            this.$input.setCustomValidity(help);\n          }\n\n          if (this.$input.validationMessage === '') {\n            this.$input.setCustomValidity('Value type mismatch');\n          }\n\n          result = false;\n\n          break;\n        }\n      }\n    }\n\n    return result;\n  }\n\n  showInvalidResponse() {\n    if (!this.isVisible) {\n      let title = this.findLabel()?.textContent;\n\n      if (!title) {\n        title = this.$input.name;\n      }\n\n      u.addMessage(\n        `Field: ${title} - ${this.$input.validationMessage}`,\n        'warning'\n      );\n    }\n\n    let $help = this.el.querySelector(this.errorSelector);\n\n    if (!$help) {\n      $help = this.createHelpElement();\n      this.el.appendChild($help);\n      this.prepareWrapper();\n    }\n\n    $help.textContent = this.$input.validationMessage;\n  }\n\n  createHelpElement() {\n    const className = this.options.errorMessageClass || 'invalid-tooltip';\n    const parsed = this.parseSelector(this.errorSelector);\n\n    const $help = u.html(`<div class=\"${className}\"></div>`);\n\n    $help.classList.add(...parsed.classes);\n\n    parsed.attrs.forEach((attr) => {\n      $help.setAttribute(attr[0], attr[1] || '');\n    });\n\n    parsed.ids.forEach((id) => {\n      $help.id = id;\n    });\n\n    return $help;\n  }\n\n     \n                                              \n    \n                       \n                                                               \n     \n  parseSelector(subselector) {\n    var obj = {tags:[], classes:[], ids:[], attrs:[]};\n    subselector.split(/(?=\\.)|(?=#)|(?=\\[)/).forEach(function(token){\n      switch (token[0]) {\n        case '#':\n          obj.ids.push(token.slice(1));\n          break;\n        case '.':\n          obj.classes.push(token.slice(1));\n          break;\n        case '[':\n          obj.attrs.push(token.slice(1,-1).split('='));\n          break;\n        default :\n          obj.tags.push(token);\n          break;\n      }\n    });\n    return obj;\n  }\n\n  clearInvalidResponse() {\n    const $help = this.el.querySelector(this.errorSelector);\n\n    $help.textContent = '';\n  }\n\n  getForm() {\n    return this.el.closest(this.options['formSelector'] || '[uni-form-validate]');\n  }\n\n  findLabel() {\n    const id = this.$input.id;\n\n    const wrapper = this.$input.closest('[data-field-wrapper]');\n    let label = null;\n\n    if (wrapper) {\n      label = wrapper.querySelector('[data-field-label]');\n    }\n\n    if (!label) {\n      label = document.querySelector(`label[for=\"${id}\"]`);\n    }\n\n    return label;\n  }\n}\n\nu.directive('form-validate', {\n  mounted(el, binding) {\n    u.getBoundedInstance(el, 'form.validation', (ele) => {\n      return new UnicornFormValidation(ele, JSON.parse(binding.value || '{}'));\n    });\n  },\n  updated(el, binding) {\n    const instance = u.getBoundedInstance(el, 'form.validation');\n    instance.options = JSON.parse(binding.value || '{}');\n  }\n});\n\nu.directive('field-validate', {\n  mounted(el, binding) {\n    u.getBoundedInstance(el, 'field.validation', (ele) => {\n      return new UnicornFieldValidation(ele, JSON.parse(binding.value || '{}'));\n    });\n  },\n\n  updated(el, binding) {\n    const instance = u.getBoundedInstance(el, 'field.validation');\n    instance.options = JSON.parse(binding.value || '{}');\n  }\n});\n\nfunction camelTo(str, sep) {\n  return str.replace(/([a-z])([A-Z])/g, `$1${sep}$2`).toLowerCase();\n}\n\nhandlers.username = function(value, element) {\n  const regex = new RegExp(\"[\\<|\\>|\\\"|\\'|\\%|\\;|\\(|\\)|\\&]\", \"i\");\n  return !regex.test(value);\n};\n\nhandlers.numeric = function(value, element) {\n  const regex = /^(\\d|-)?(\\d|,)*\\.?\\d*$/;\n  return regex.test(value);\n};\n\nhandlers.email = function(value, element) {\n  value = punycode.toASCII(value);\n  const regex = /^[a-zA-Z0-9.!#$%&â€™*+\\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\n  return regex.test(value);\n};\n\nhandlers.url = function(value, element) {\n  const regex = /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/i;\n  return regex.test(value);\n};\n\nhandlers.alnum = function(value, element) {\n  const regex = /^[a-zA-Z0-9]*$/;\n  return regex.test(value);\n};\n\nhandlers.color = function(value, element) {\n  const regex = /^#(?:[0-9a-f]{3}){1,2}$/;\n  return regex.test(value);\n};\n\n   \n                                                                                                   \n   \nhandlers.creditcard = function(value, element) {\n  const regex = /^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6011[0-9]{12}|622((12[6-9]|1[3-9][0-9])|([2-8][0-9][0-9])|(9(([0-1][0-9])|(2[0-5]))))[0-9]{10}|64[4-9][0-9]{13}|65[0-9]{14}|3(?:0[0-5]|[68][0-9])[0-9]{11}|3[47][0-9]{13})*$/;\n  return regex.test(value);\n};\n\nhandlers.ip = function(value, element) {\n  const regex = /^((?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))*$/;\n  return regex.test(value);\n};\n\nhandlers['password-confirm'] = function (value, element) {\n  const selector = element.attr('data-confirm-target');\n  const target = $(selector);\n\n  return target.val() === value;\n};\n\n                                                                                    \n                                                                                      \n"],"sourceRoot":""}