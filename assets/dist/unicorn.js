!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Unicorn=e():t.Unicorn=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e,n){"use strict";var r=n(2),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();e.a=o},,function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(9))},function(t,e,n){"use strict";(function(t){var r=n(0),i=n(6),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,u=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=u&&u.exports===o?r.a.Buffer:void 0,c=(a?a.isBuffer:void 0)||i.a;e.a=c}).call(this,n(4)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";(function(t){var r=n(2),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,u=o&&o.exports===i&&r.a.process,a=function(){try{var t=o&&o.require&&o.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();e.a=a}).call(this,n(4)(t))},function(t,e,n){"use strict";e.a=function(){return!1}},function(t,e,n){"use strict";(function(t){var r=n(0),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,u=o&&o.exports===i?r.a.Buffer:void 0,a=u?u.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(4)(t))},function(t,e,n){t.exports=n(11)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r;!function(){"use strict";var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(t){return a(s(t),arguments)}function u(t,e){return o.apply(null,[t].concat(e||[]))}function a(t,e){var n,r,u,a,c,s,l,f,p,h=1,d=t.length,v="";for(r=0;r<d;r++)if("string"==typeof t[r])v+=t[r];else if("object"==typeof t[r]){if((a=t[r]).keys)for(n=e[h],u=0;u<a.keys.length;u++){if(null==n)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[u],a.keys[u-1]));n=n[a.keys[u]]}else n=a.param_no?e[a.param_no]:e[h++];if(i.not_type.test(a.type)&&i.not_primitive.test(a.type)&&n instanceof Function&&(n=n()),i.numeric_arg.test(a.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(o("[sprintf] expecting number but found %T",n));switch(i.number.test(a.type)&&(f=n>=0),a.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,a.width?parseInt(a.width):0);break;case"e":n=a.precision?parseFloat(n).toExponential(a.precision):parseFloat(n).toExponential();break;case"f":n=a.precision?parseFloat(n).toFixed(a.precision):parseFloat(n);break;case"g":n=a.precision?String(Number(n.toPrecision(a.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=a.precision?n.substring(0,a.precision):n;break;case"t":n=String(!!n),n=a.precision?n.substring(0,a.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=a.precision?n.substring(0,a.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=a.precision?n.substring(0,a.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}i.json.test(a.type)?v+=n:(!i.number.test(a.type)||f&&!a.sign?p="":(p=f?"+":"-",n=n.toString().replace(i.sign,"")),s=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",l=a.width-(p+n).length,c=a.width&&l>0?s.repeat(l):"",v+=a.align?p+n+c:"0"===s?p+c+n:c+p+n)}return v}var c=Object.create(null);function s(t){if(c[t])return c[t];for(var e,n=t,r=[],o=0;n;){if(null!==(e=i.text.exec(n)))r.push(e[0]);else if(null!==(e=i.modulo.exec(n)))r.push("%");else{if(null===(e=i.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){o|=1;var u=[],a=e[2],s=[];if(null===(s=i.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(u.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=i.key_access.exec(a)))u.push(s[1]);else{if(null===(s=i.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");u.push(s[1])}e[2]=u}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:e[0],param_no:e[1],keys:e[2],sign:e[3],pad_char:e[4],align:e[5],width:e[6],precision:e[7],type:e[8]})}n=n.substring(e[0].length)}return c[t]=r}e.sprintf=o,e.vsprintf=u,"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=u,void 0===(r=function(){return{sprintf:o,vsprintf:u}}.call(e,n,e,t))||(t.exports=r))}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e),n.d(e,"EventMixin",(function(){return O})),n.d(e,"EventBus",(function(){return j})),n.d(e,"Mixin",(function(){return l})),n.d(e,"mix",(function(){return f})),n.d(e,"helper",(function(){return $n})),n.d(e,"createApp",(function(){return ir})),n.d(e,"noConflict",(function(){return or}));var o=function(t,e){return t.hasOwnProperty("__mixwith_appliedMixin")&&t.__mixwith_appliedMixin===c(e)},u=function(t,e){for(;null!=t;){if(o(t,e))return!0;t=Object.getPrototypeOf(t)}return!1},a=function(t,e){return Object.setPrototypeOf(e,t),t.__mixwith_wrappedMixin||(t.__mixwith_wrappedMixin=t),e},c=function(t){return t.__mixwith_wrappedMixin||t},s=function(t){return a(t,(function(e){return function(t,e){var n=e(t);return n.prototype.__mixwith_appliedMixin=c(e),n}(e,t)}))},l=function(t){return function(t){return a(t,(function(e){return u(e.prototype,t)?e:t(e)}))}(function(t){return a(t,(function(e){var n=e.__mixwith_cachedApplications;n||(n=e.__mixwith_cachedApplications=new Map);var r=n.get(t);return r||(r=t(e),n.set(t,r)),r}))}(s(t)))},f=function(t){return new p(t)},p=function(){function t(e){r(this,t),this.superclass=e||function(){return function t(){r(this,t)}}()}var e,n,o;return e=t,(n=[{key:"with",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return e(t)}),this.superclass)}}])&&i(e.prototype,n),o&&i(e,o),t}();function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=k(t);if(e){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?_(t):e}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.setPrototypeOf=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){return t.__proto__=e,t}:function(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t});var O=l((function(t){return function(t){y(o,t);var e,n,r,i=g(o);function o(){var t;d(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return w(_(t=i.call.apply(i,[this].concat(n))),"_listeners",{}),t}return e=o,(n=[{key:"on",value:function(t,e){var n=this;return Array.isArray(t)?(t.forEach((function(t){return n.on(t,e)})),this):(void 0===this._listeners[t]&&(this._listeners[t]=[]),this._listeners[t].push(e),this)}},{key:"once",value:function(t,e){var n=this;if(Array.isArray(t))return t.forEach((function(t){return n.once(t,e)})),this;e._once=!0,this.on(t,e)}},{key:"off",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!==e?(this._listeners[t]=this.listeners(t).filter((function(t){return t!==e})),this):(delete this._listeners[t],this)}},{key:"trigger",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Array.isArray(t)?(t.forEach((function(t){return e.trigger(t)})),this):(this.listeners(t).forEach((function(t){t.apply(void 0,r)})),this._listeners[t]=this.listeners(t).filter((function(t){return!0!==t._once})),this)}},{key:"listeners",value:function(t){if("string"!=typeof t)throw new Error("get listeners event name should only use string.");return void 0===this._listeners[t]?[]:this._listeners[t]}}])&&v(e.prototype,n),r&&v(e,r),o}(t)})),j=function(t){y(n,t);var e=g(n);function n(){return d(this,n),e.apply(this,arguments)}return n}(O(function(){return function t(){d(this,t)}}()));var A=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},x=n(0),S=x.a.Symbol,P=Object.prototype,E=P.hasOwnProperty,C=P.toString,T=S?S.toStringTag:void 0;var D=function(t){var e=E.call(t,T),n=t[T];try{t[T]=void 0;var r=!0}catch(t){}var i=C.call(t);return r&&(e?t[T]=n:delete t[T]),i},M=Object.prototype.toString;var F=function(t){return M.call(t)},I=S?S.toStringTag:void 0;var N=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":I&&I in Object(t)?D(t):F(t)};var R=function(t){return null!=t&&"object"==typeof t};var q=function(t){return R(t)&&"[object Arguments]"==N(t)},z=Object.prototype,H=z.hasOwnProperty,B=z.propertyIsEnumerable,L=q(function(){return arguments}())?q:function(t){return R(t)&&H.call(t,"callee")&&!B.call(t,"callee")},U=Array.isArray,V=n(3),W=/^(?:0|[1-9]\d*)$/;var X=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&W.test(t))&&t>-1&&t%1==0&&t<e};var G=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},J={};J["[object Float32Array]"]=J["[object Float64Array]"]=J["[object Int8Array]"]=J["[object Int16Array]"]=J["[object Int32Array]"]=J["[object Uint8Array]"]=J["[object Uint8ClampedArray]"]=J["[object Uint16Array]"]=J["[object Uint32Array]"]=!0,J["[object Arguments]"]=J["[object Array]"]=J["[object ArrayBuffer]"]=J["[object Boolean]"]=J["[object DataView]"]=J["[object Date]"]=J["[object Error]"]=J["[object Function]"]=J["[object Map]"]=J["[object Number]"]=J["[object Object]"]=J["[object RegExp]"]=J["[object Set]"]=J["[object String]"]=J["[object WeakMap]"]=!1;var K=function(t){return R(t)&&G(t.length)&&!!J[N(t)]};var Z=function(t){return function(e){return t(e)}},Q=n(5),Y=Q.a&&Q.a.isTypedArray,tt=Y?Z(Y):K,et=Object.prototype.hasOwnProperty;var nt=function(t,e){var n=U(t),r=!n&&L(t),i=!n&&!r&&Object(V.a)(t),o=!n&&!r&&!i&&tt(t),u=n||r||i||o,a=u?A(t.length,String):[],c=a.length;for(var s in t)!e&&!et.call(t,s)||u&&("length"==s||i&&("offset"==s||"parent"==s)||o&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||X(s,c))||a.push(s);return a},rt=Object.prototype;var it=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||rt)};var ot=function(t,e){return function(n){return t(e(n))}},ut=ot(Object.keys,Object),at=Object.prototype.hasOwnProperty;var ct=function(t){if(!it(t))return ut(t);var e=[];for(var n in Object(t))at.call(t,n)&&"constructor"!=n&&e.push(n);return e};var st=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var lt=function(t){if(!st(t))return!1;var e=N(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var ft=function(t){return null!=t&&G(t.length)&&!lt(t)};var pt=function(t){return ft(t)?nt(t):ct(t)};function ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var vt="_unicornDirectiveDisconnectors",yt=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),dt(this,"directives",{}),dt(this,"instances",[]),dt(this,"listenTarget",document.body),dt(this,"discountCallback",void 0),dt(this,"hooks",{mounted:{before:function(t,n){n[vt]=n[vt]||{},n[vt][t]=e.observeChildren(n),e.instances[t]=e.instances[t]||[],e.instances[t].push(n)}},unmounted:{after:function(t,e){e[vt]&&e[vt][t]&&(e[vt][t](),delete e[vt][t])}}})}var e,n,r;return e=t,r=[{key:"is",get:function(){return"directive"}},{key:"install",value:function(t){var e=t.$directive=new this(t);t.directive=e.register.bind(e),e.listen()}}],(n=[{key:"register",value:function(t,e){var n=this;this.discountCallback||this.listen();var r=this.getDirectiveAttrName(t);this.directives[r]=e,[].forEach.call(this.listenTarget.querySelectorAll("["+r+"]"),(function(t){n.runDirectiveIfExists(r,t,"mounted")}))}},{key:"remove",value:function(t){var e=this,n=this.getDirectiveAttrName(t);this.instances[n]&&(this.instances[n].forEach((function(t){e.runDirectiveIfExists(n,t,"unmounted")})),delete this.instances[n]),delete this.directives[n]}},{key:"getDirectiveAttrName",value:function(t){return"uni-".concat(t)}},{key:"observeRoot",value:function(t){var e=this,n=new MutationObserver((function(t){t.forEach((function(t){[].forEach.call(t.addedNodes,(function(n){e.findDirectivesFromNode(n).forEach((function(r){e.runDirectiveIfExists(r,n,"mounted",t)}))})),[].forEach.call(t.removedNodes,(function(n){e.findDirectivesFromNode(n).forEach((function(r){e.runDirectiveIfExists(r,n,"unmounted",t)}))})),"attributes"===t.type&&null==t.oldValue&&e.runDirectiveIfExists(t.attributeName,t.target,"mounted",t)}))}));return n.observe(t,{attributes:!0,attributeOldValue:!0,childList:!0,characterData:!1,subtree:!0}),function(){n.disconnect()}}},{key:"observeChildren",value:function(t){var e=this,n=new MutationObserver((function(t){t.forEach((function(t){"attributes"!==t.type||t.target.getAttribute(t.attributeName)||e.runDirectiveIfExists(t.attributeName,t.target,"unmounted",t),e.findDirectivesFromNode(t.target).forEach((function(n){"attributes"!==t.type&&"childList"!==t.type||e.runDirectiveIfExists(n,t.target,"updated",t)}))}))}));return n.observe(t,{attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0,attributeFilter:pt(this.directives)}),function(){n.disconnect()}}},{key:"listenTo",value:function(t){this.listenTarget=t}},{key:"listen",value:function(){return this.discountCallback=this.observeRoot(this.listenTarget)}},{key:"disconnect",value:function(){this.discountCallback&&(this.discountCallback(),this.discountCallback=null)}},{key:"getDirective",value:function(t){return this.directives[t]}},{key:"runDirectiveIfExists",value:function(t,e,n,r){var i,o,u,a,c=this.getDirective(t);c&&c[n]&&(null!==(i=this.hooks)&&void 0!==i&&null!==(o=i[n])&&void 0!==o&&o.before&&this.hooks[n].before(t,e),c[n](e,{directive:t,node:e,value:e.getAttribute(t),oldValue:null==r?void 0:r.oldValue,mutation:r,dir:c}),null!==(u=this.hooks)&&void 0!==u&&null!==(a=u[n])&&void 0!==a&&a.after&&this.hooks[n].after(t,e))}},{key:"findDirectivesFromNode",value:function(t){var e=[];return t.getAttributeNames?(t.getAttributeNames().forEach((function(t){t.startsWith("uni-")&&e.push(t)})),e):[]}}])&&ht(e.prototype,n),r&&ht(e,r),t}();function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var gt=function(){function t(e){var n,r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i={},(r="keys")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.app=e}var e,n,r;return e=t,r=[{key:"is",get:function(){return"lang"}},{key:"install",value:function(t){var e=t.$lang=new this(t);t.__=e.__.bind(e),t.trans=e.trans.bind(e)}}],(n=[{key:"__",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.trans.apply(this,[t].concat(n))}},{key:"trans",value:function(t){for(var e=this.normalize(t),n=this.find(e)||"",r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.length&&(n=this.sprintf.apply(this,[n].concat(i))),""!==n?n:this.wrapDebug(t,!1)}},{key:"sprintf",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.app.vsprintf(t,n)}},{key:"find",value:function(t){var e=this.app.data("unicorn.languages")||{};return e[t]?e[t]:null}},{key:"has",value:function(t){return void 0!==this.app.data("unicorn.languages")[t]}},{key:"add",value:function(t,e){var n=this.app.data("unicorn.languages")||{};return n[this.normalize(t)]=e,this.app.data("unicorn.languages",n),this}},{key:"normalize",value:function(t){return t.replace(/[^A-Z0-9]+/gi,".")}},{key:"wrapDebug",value:function(t,e){return this.app.isDebug()?e?"**"+t+"**":"??"+t+"??":t}}])&&bt(e.prototype,n),r&&bt(e,r),t}();function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _t=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"install",value:function(t){t.formValidation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uni-form-validate";return t.import("@unicorn/ui/validation-components.js"),t.selectOne(e)}}}],(n=null)&&mt(e.prototype,n),r&&mt(e,r),t}();function kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var wt=function(){function t(e){var n,r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i=void 0,(r="theme")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.app=e,this.aliveHandle=null}var e,n,r;return e=t,r=[{key:"is",get:function(){return"ui"}},{key:"install",value:function(t){window.deferLoadingAlpine=function(){};var e=t.$ui=new this(t);t.addMessage=e.renderMessage,t.loadAlpine=e.loadAlpine.bind(e),t.loadSpruce=e.loadSpruce.bind(e),t.initAlpine=e.initAlpine.bind(e),t.startAlpine=e.startAlpine.bind(e),t.startAlpineSpruce=e.startAlpineSpruce.bind(e),t.initAlpineSpruce=e.initAlpineSpruce.bind(e)}},{key:"defaultOptions",get:function(){return{messageSelector:".message-wrap"}}}],(n=[{key:"installTheme",value:function(t){this.theme=t}},{key:"renderMessage",value:function(t){}},{key:"loadAlpine",value:function(){return this.app.import("@alpinejs")}},{key:"loadSpruce",value:function(){return Promise.all([this.loadAlpine(),this.app.import("@spruce")])}},{key:"initAlpine",value:function(t){var e=this;return this.loadAlpine().then((function(){var n=e.app.selectOne(t);Alpine.initializeComponent(n)}))}},{key:"startAlpine",value:function(){return this.loadAlpine().then((function(){Spruce&&Spruce.start(),Alpine.start()}))}},{key:"startAlpineSpruce",value:function(){return this.loadSpruce().then((function(){Alpine.start()}))}},{key:"initAlpineSpruce",value:function(t){var e=this;return this.loadSpruce().then((function(){var n=e.app.selectOne(t);Alpine.initializeComponent(n)}))}},{key:"flatpickr",value:function(){return this.app.import("@unicorn/ui/flatpickr-components.js")}},{key:"listDependent",value:function(){return this.app.import("@unicorn/ui/list-dependent.js")}},{key:"sid",value:function(){return this.app.import("@unicorn/field/single-image-drag.js")}},{key:"fileDrag",value:function(){return this.app.import("@unicorn/field/file-drag.js")}},{key:"iframeModal",value:function(){return this.app.import("@unicorn/ui/iframe-modal.js")}},{key:"slideUp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;(t=this.app.selectOne(t))._clearSlider&&(clearInterval(t._clearSlider),t._clearSlider=null),t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=e+"ms",t.style.boxSizing="border-box",t.style.height=t.offsetHeight+"px",t.offsetHeight,t.style.overflow="hidden",t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0,t.style.marginTop=0,t.style.marginBottom=0,t._clearSlider=window.setTimeout((function(){t.style.display="none",t.style.removeProperty("height"),t.style.removeProperty("padding-top"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-bottom"),t.style.removeProperty("overflow"),t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-property")}),e)}},{key:"slideDown",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;(t=this.app.selectOne(t))._clearSlider&&(clearInterval(t._clearSlider),t._clearSlider=null),t.style.removeProperty("display");var n=window.getComputedStyle(t).display;"none"===n&&(n="block"),t.style.display=n;var r=t.offsetHeight;t.style.overflow="hidden",t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0,t.style.marginTop=0,t.style.marginBottom=0,t.offsetHeight,t.style.boxSizing="border-box",t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=e+"ms",t.style.height=r+"px",t.style.removeProperty("padding-top"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-bottom"),t._clearSlider=window.setTimeout((function(){t.style.removeProperty("height"),t.style.removeProperty("overflow"),t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-property")}),e)}},{key:"slideToggle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return t=this.app.selectOne(t),"none"===window.getComputedStyle(t).display?this.slideDown(t,e):this.slideUp(t,e)}},{key:"fadeOut",value:function(t){(t=this.app.selectOne(t)).style.opacity=1,function e(){(t.style.opacity-=.1)<0?t.style.display="none":requestAnimationFrame(e)}()}},{key:"fadeIn",value:function(t,e){(t=this.app.selectOne(t)).style.opacity=0,t.style.display=e||"block",function e(){var n=parseFloat(t.style.opacity);(n+=.1)>1||(t.style.opacity=n,requestAnimationFrame(e))}()}}])&&kt(e.prototype,n),r&&kt(e,r),t}();var Ot=function(){this.__data__=[],this.size=0};var jt=function(t,e){return t===e||t!=t&&e!=e};var At=function(t,e){for(var n=t.length;n--;)if(jt(t[n][0],e))return n;return-1},xt=Array.prototype.splice;var St=function(t){var e=this.__data__,n=At(e,t);return!(n<0)&&(n==e.length-1?e.pop():xt.call(e,n,1),--this.size,!0)};var Pt=function(t){var e=this.__data__,n=At(e,t);return n<0?void 0:e[n][1]};var Et=function(t){return At(this.__data__,t)>-1};var Ct=function(t,e){var n=this.__data__,r=At(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function Tt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Tt.prototype.clear=Ot,Tt.prototype.delete=St,Tt.prototype.get=Pt,Tt.prototype.has=Et,Tt.prototype.set=Ct;var Dt=Tt;var Mt=function(){this.__data__=new Dt,this.size=0};var Ft=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var It=function(t){return this.__data__.get(t)};var Nt,Rt=function(t){return this.__data__.has(t)},qt=x.a["__core-js_shared__"],zt=(Nt=/[^.]+$/.exec(qt&&qt.keys&&qt.keys.IE_PROTO||""))?"Symbol(src)_1."+Nt:"";var Ht=function(t){return!!zt&&zt in t},$t=Function.prototype.toString;var Bt=function(t){if(null!=t){try{return $t.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Lt=/^\[object .+?Constructor\]$/,Ut=Function.prototype,Vt=Object.prototype,Wt=Ut.toString,Xt=Vt.hasOwnProperty,Gt=RegExp("^"+Wt.call(Xt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Jt=function(t){return!(!st(t)||Ht(t))&&(lt(t)?Gt:Lt).test(Bt(t))};var Kt=function(t,e){return null==t?void 0:t[e]};var Zt=function(t,e){var n=Kt(t,e);return Jt(n)?n:void 0},Qt=Zt(x.a,"Map"),Yt=Zt(Object,"create");var te=function(){this.__data__=Yt?Yt(null):{},this.size=0};var ee=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ne=Object.prototype.hasOwnProperty;var re=function(t){var e=this.__data__;if(Yt){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return ne.call(e,t)?e[t]:void 0},ie=Object.prototype.hasOwnProperty;var oe=function(t){var e=this.__data__;return Yt?void 0!==e[t]:ie.call(e,t)};var ue=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Yt&&void 0===e?"__lodash_hash_undefined__":e,this};function ae(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ae.prototype.clear=te,ae.prototype.delete=ee,ae.prototype.get=re,ae.prototype.has=oe,ae.prototype.set=ue;var ce=ae;var se=function(){this.size=0,this.__data__={hash:new ce,map:new(Qt||Dt),string:new ce}};var le=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var fe=function(t,e){var n=t.__data__;return le(e)?n["string"==typeof e?"string":"hash"]:n.map};var pe=function(t){var e=fe(this,t).delete(t);return this.size-=e?1:0,e};var he=function(t){return fe(this,t).get(t)};var de=function(t){return fe(this,t).has(t)};var ve=function(t,e){var n=fe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function ye(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ye.prototype.clear=se,ye.prototype.delete=pe,ye.prototype.get=he,ye.prototype.has=de,ye.prototype.set=ve;var be=ye;var ge=function(t,e){var n=this.__data__;if(n instanceof Dt){var r=n.__data__;if(!Qt||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new be(r)}return n.set(t,e),this.size=n.size,this};function me(t){var e=this.__data__=new Dt(t);this.size=e.size}me.prototype.clear=Mt,me.prototype.delete=Ft,me.prototype.get=It,me.prototype.has=Rt,me.prototype.set=ge;var _e=me,ke=function(){try{var t=Zt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var we=function(t,e,n){"__proto__"==e&&ke?ke(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var Oe=function(t,e,n){(void 0!==n&&!jt(t[e],n)||void 0===n&&!(e in t))&&we(t,e,n)};var je=function(t){return function(e,n,r){for(var i=-1,o=Object(e),u=r(e),a=u.length;a--;){var c=u[t?a:++i];if(!1===n(o[c],c,o))break}return e}}(),Ae=n(7),xe=x.a.Uint8Array;var Se=function(t){var e=new t.constructor(t.byteLength);return new xe(e).set(new xe(t)),e};var Pe=function(t,e){var n=e?Se(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var Ee=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},Ce=Object.create,Te=function(){function t(){}return function(e){if(!st(e))return{};if(Ce)return Ce(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),De=ot(Object.getPrototypeOf,Object);var Me=function(t){return"function"!=typeof t.constructor||it(t)?{}:Te(De(t))};var Fe=function(t){return R(t)&&ft(t)},Ie=Function.prototype,Ne=Object.prototype,Re=Ie.toString,qe=Ne.hasOwnProperty,ze=Re.call(Object);var He=function(t){if(!R(t)||"[object Object]"!=N(t))return!1;var e=De(t);if(null===e)return!0;var n=qe.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Re.call(n)==ze};var $e=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},Be=Object.prototype.hasOwnProperty;var Le=function(t,e,n){var r=t[e];Be.call(t,e)&&jt(r,n)&&(void 0!==n||e in t)||we(t,e,n)};var Ue=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,u=e.length;++o<u;){var a=e[o],c=r?r(n[a],t[a],a,n,t):void 0;void 0===c&&(c=t[a]),i?we(n,a,c):Le(n,a,c)}return n};var Ve=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},We=Object.prototype.hasOwnProperty;var Xe=function(t){if(!st(t))return Ve(t);var e=it(t),n=[];for(var r in t)("constructor"!=r||!e&&We.call(t,r))&&n.push(r);return n};var Ge=function(t){return ft(t)?nt(t,!0):Xe(t)};var Je=function(t){return Ue(t,Ge(t))};var Ke=function(t,e,n,r,i,o,u){var a=$e(t,n),c=$e(e,n),s=u.get(c);if(s)Oe(t,n,s);else{var l=o?o(a,c,n+"",t,e,u):void 0,f=void 0===l;if(f){var p=U(c),h=!p&&Object(V.a)(c),d=!p&&!h&&tt(c);l=c,p||h||d?U(a)?l=a:Fe(a)?l=Ee(a):h?(f=!1,l=Object(Ae.a)(c,!0)):d?(f=!1,l=Pe(c,!0)):l=[]:He(c)||L(c)?(l=a,L(a)?l=Je(a):st(a)&&!lt(a)||(l=Me(c))):f=!1}f&&(u.set(c,l),i(l,c,r,o,u),u.delete(c)),Oe(t,n,l)}};var Ze=function t(e,n,r,i,o){e!==n&&je(n,(function(u,a){if(o||(o=new _e),st(u))Ke(e,n,a,r,t,i,o);else{var c=i?i($e(e,a),u,a+"",e,n,o):void 0;void 0===c&&(c=u),Oe(e,a,c)}}),Ge)};var Qe=function(t){return t};var Ye=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},tn=Math.max;var en=function(t,e,n){return e=tn(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=tn(r.length-e,0),u=Array(o);++i<o;)u[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(u),Ye(t,this,a)}};var nn=function(t){return function(){return t}},rn=ke?function(t,e){return ke(t,"toString",{configurable:!0,enumerable:!1,value:nn(e),writable:!0})}:Qe,on=Date.now;var un=function(t){var e=0,n=0;return function(){var r=on(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(rn);var an=function(t,e){return un(en(t,e,Qe),t+"")};var cn=function(t,e,n){if(!st(n))return!1;var r=typeof e;return!!("number"==r?ft(n)&&X(e,n.length):"string"==r&&e in n)&&jt(n[e],t)};var sn=function(t){return an((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,u=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,u&&cn(n[0],n[1],u)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,o)}return e}))},ln=sn((function(t,e,n){Ze(t,e,n)}));function fn(t,e,n){return pn(t),t.__unicorn[e]=t.__unicorn[e]||n(),t.__unicorn[e]}function pn(t){return t?(t.__unicorn=t.__unicorn||{},t):t}function hn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vn(t,e,n){return e&&dn(t.prototype,e),n&&dn(t,n),t}var yn=function(){function t(){hn(this,t)}return vn(t,null,[{key:"is",get:function(){return"grid"}},{key:"install",value:function(t){t.grid=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="string"==typeof e?e:null;return fn(e=t.selectOne(e),"grid.plugin",(function(){return new bn(r,e,n,t)}))}}}]),t}(),bn=function(){function t(e,n,r,i){var o,u,a;if(hn(this,t),a="",(u="ordering")in(o=this)?Object.defineProperty(o,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[u]=a,this.element=n,this.options=Object.assign({},this.constructor.defaultOptions,r),this.app=i,this.form=i.form(e||n),!this.form)throw new Error("UnicornGrid is dependent on UnicornForm");this.registerEvents()}return vn(t,[{key:"registerEvents",value:function(){}},{key:"initComponent",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"grid",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.ordering=this.element.dataset.ordering,this.ordering.toLowerCase().endsWith(" asc")||this.ordering.toLowerCase().endsWith(" desc")||(this.ordering+=" ASC"),this.app.loadSpruce().then((function(){Spruce.store(e,t.useState(n)),t.app.startAlpine()}))}},{key:"useState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ln(this,t)}},{key:"sendFilter",value:function(t){t&&t.preventDefault(),this.form.put()}},{key:"clearFilters",value:function(t){t.querySelectorAll("input, textarea, select").forEach((function(t){t.value=""})),this.form.put()}},{key:"toggleFilters",value:function(t,e){t?this.app.$ui.slideDown(e):this.app.$ui.slideUp(e)}},{key:"sort",value:function(t){var e=this.getDirection(t),n=t.dataset.field,r=t.dataset.asc,i=t.dataset.desc;return n&&(r=n+" ASC",i=n+" DESC"),"ASC"===e?this.sortBy(i):this.sortBy(r)}},{key:"sortBy",value:function(t){var e=this.element.querySelector("input[name=list_ordering]");return e||(e=this.app.h("input",{name:"list_ordering",type:"hidden",value:""}),this.element.appendChild(e)),e.value=t,this.form.put()}},{key:"isSortActive",value:function(t){return null!=this.getDirection(t)}},{key:"getDirection",value:function(t){var e=t.dataset.field,n=t.dataset.asc,r=t.dataset.desc;return e&&(n=e+" ASC",r=e+" DESC"),this.orderingEquals(n,this.ordering)?"ASC":this.orderingEquals(r,this.ordering)?"DESC":null}},{key:"orderingEquals",value:function(t,e){return(t=t.replace(/\s+/g," ").trim().toLowerCase())===(e=e.replace(/\s+/g," ").trim().toLowerCase())}},{key:"checkRow",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.form.element.querySelector('input[data-role=grid-checkbox][data-row-number="'.concat(t,'"]'));if(!n)throw new Error("Checkbox of row: "+t+" not found.");n.checked=e}},{key:"updateRow",value:function(t,e,n){return this.toggleAll(!1),this.disableAllCheckboxes(),this.form.injectInput("id[]",t),this.form.patch(e,n)}},{key:"doTask",value:function(t,e,n,r){return(r=r||{}).task=t,this.updateRow(e,n,r)}},{key:"batch",value:function(t,e,n){return(n=n||{}).task=t,this.form.patch(e,n)}},{key:"copyRow",value:function(t,e,n){return this.toggleAll(!1),this.checkRow(t),this.form.post(e,n)}},{key:"deleteList",value:function(t,e,n){var r=this;try{this.validateChecked()}catch(t){return!1}return!1!==(t=null==t?this.app.__("unicorn.message.delete.confirm"):t)?this.app.confirm(t).then((function(t){t&&r.form.delete(e,n)})):this.form.delete(e,n),!0}},{key:"deleteRow",value:function(t,e,n,r){var i=this;return e=e||this.app.__("unicorn.message.delete.confirm"),this.app.confirm(e,(function(e){e&&(i.toggleAll(!1),i.checkRow(t),i.deleteList(!1,n,r))})),!0}},{key:"toggleAll",value:function(t){return this.app.selectAll(this.element.querySelectorAll("input[data-role=grid-checkbox][type=checkbox]")).map((function(e){e.checked=t})),this}},{key:"disableAllCheckboxes",value:function(){this.app.selectAll(this.element.querySelectorAll("input[data-role=grid-checkbox][type=checkbox]"),(function(t){t.disabled=!0}))}},{key:"countChecked",value:function(){return this.getChecked().length}},{key:"getChecked",value:function(){return this.app.selectAll(this.element.querySelectorAll("input[data-role=grid-checkbox][type=checkbox]:checked"))}},{key:"validateChecked",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t=t||this.app.__("unicorn.message.grid.checked"),!this.hasChecked())throw alert(t),new Error(t);return e&&e(this),this}},{key:"hasChecked",value:function(){return this.countChecked()>0}},{key:"reorderAll",value:function(t,e){return this.batch("reorder",t,e)}},{key:"moveRow",value:function(t,e,n,r){return(r=r||{}).delta=e,this.doTask("move",t,n,r)}},{key:"moveUp",value:function(t,e,n){return this.moveRow(t,-1,e,n)}},{key:"moveDown",value:function(t,e,n){return this.moveRow(t,1,e,n)}},{key:"getId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.form.element.id+t}}],[{key:"defaultOptions",get:function(){return{}}}]),t}();var gn=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t};var mn=function(t,e){return function(n,r){if(null==n)return n;if(!ft(n))return t(n,r);for(var i=n.length,o=e?i:-1,u=Object(n);(e?o--:++o<i)&&!1!==r(u[o],o,u););return n}}((function(t,e){return t&&je(t,e,pt)}));var _n=function(t){return"function"==typeof t?t:Qe};var kn=function(t,e){return(U(t)?gn:mn)(t,_n(e))};function wn(t){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function On(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function An(t,e,n){return e&&jn(t.prototype,e),n&&jn(t,n),t}var xn=function(){function t(){On(this,t)}return An(t,null,[{key:"is",get:function(){return"form"}},{key:"install",value:function(t){t.form=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="string"==typeof e?e:null;return fn(e=t.selectOne(e),"form.plugin",(function(){return new Sn(r,e,n,t)}))}}}]),t}(),Sn=function(){function t(e,n,r,i){if(On(this,t),this.app=i,!n){n=document.createElement("form"),0===e.indexOf("#")&&(n.setAttribute("id",e.substr(1)),n.setAttribute("name",e.substr(1))),n.setAttribute("method","post"),n.setAttribute("enctype","multipart/form-data"),n.setAttribute("novalidate","true"),n.setAttribute("action",i.data("unicorn.uri").full),n.setAttribute("display","none");var o=document.createElement("input");o.setAttribute("name",i.data("csrf-token")),n.appendChild(o),document.body.appendChild(n)}r=Object.assign({},this.constructor.defaultOptions,r),this.element=n,this.options=r,this.bindEvents()}return An(t,[{key:"bindEvents",value:function(){}},{key:"initComponent",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"form",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.app.loadSpruce().then((function(){Spruce.store(e,t.useState(n)),t.app.startAlpine()}))}},{key:"useState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ln(this,t)}},{key:"submit",value:function(t,e,n,r){var i=this,o=this.element;if(r){var u=o.querySelector('input[name="_method"]');u||((u=document.createElement("input")).setAttribute("name","_method"),u.setAttribute("type","hidden"),o.appendChild(u)),u.value=r}if(e){var a=this.constructor.flattenObject(e);kn(a,(function(t,e){var n=i.constructor.buildFieldName(e);i.injectInput(n,t)}))}t&&o.setAttribute("action",t),n&&o.setAttribute("method",n);var c=o.querySelector("button[type=submit][data-submit]");return c||((c=this.app.h("button",{type:"submit"},"GO")).dataset.submit=!0,c.style.display="none",o.appendChild(c)),c.click(),!0}},{key:"injectInput",value:function(t,e){var n=this.element.querySelector('input[name="'.concat(t,'"]'));return n||((n=document.createElement("input")).setAttribute("name",t),n.setAttribute("type","hidden"),n.setAttribute("data-role","temp-input"),this.element.appendChild(n)),n.value=e,n}},{key:"get",value:function(t,e,n){return this.submit(t,e,"GET",n)}},{key:"post",value:function(t,e,n){return n=n||"POST",this.submit(t,e,"POST",n)}},{key:"put",value:function(t,e){return this.post(t,e,"PUT")}},{key:"patch",value:function(t,e){return this.post(t,e,"PATCH")}},{key:"delete",value:function(t,e){return this.post(t,e,"DELETE")}}],[{key:"flattenObject",value:function(t){var e={};for(var n in t)if(t.hasOwnProperty(n))if("object"===wn(t[n])&&null!=t[n]){var r=this.flattenObject(t[n]);for(var i in r)r.hasOwnProperty(i)&&(e[n+"/"+i]=r[i])}else e[n]=t[n];return e}},{key:"buildFieldName",value:function(t){var e=t.split("/");return e.shift()+e.map((function(t){return"[".concat(t,"]")})).join("")}}]),t}();var Pn=function t(e,n,r,i,o,u){return st(e)&&st(n)&&(u.set(n,e),Ze(e,n,void 0,t,u),u.delete(n)),e},En=sn((function(t,e,n,r){Ze(t,e,n,r)})),Cn=an((function(t){return t.push(void 0,Pn),Ye(En,void 0,t)}));function Tn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mn(t,e,n){return e&&Dn(t.prototype,e),n&&Dn(t,n),t}function Fn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var In=function(){function t(e){Tn(this,t),Fn(this,"instances",{}),this.ui=e,this.app=e.app}return Mn(t,[{key:"loadTinymce",value:function(){return this.app.import("@tinymce").then((function(t){return Rn().then((function(){return t}))}))}},{key:"init",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.loadTinymce().then((function(){return e.instances[t]=new Nn(t,n,e.app)}))}},{key:"get",value:function(t){return this.instances[t]}}],[{key:"install",value:function(t){t.$ui.tinymce=new this(t.$ui)}}]),t}(),Nn=function(){function t(e,n,r){var i=this;Tn(this,t),this.app=r,n.selector=e,this.selector=e,this.element=r.selectOne(e),this.options=Cn({},this.prepareOptions(n)),tinymce.init(this.options).then((function(t){i.editor=t[0]}))}return Mn(t,[{key:"getEditor",value:function(){return this.editor}},{key:"prepareOptions",value:function(t){var e=this,n={};return t.images_upload_url&&(n.paste_data_images=!0,n.remove_script_host=!1,n.relative_urls=!1,n.images_upload_handler=function(){return e.imageUploadHandler.apply(e,arguments)}),n.plugins=n.plugins||[],n.setup=function(t){t.on("change",(function(){tinymce.triggerSave()}))},-1===(t=Cn({},t,n)).plugins.indexOf("unicorndragdrop")&&t.plugins.push("unicorndragdrop"),t}},{key:"insert",value:function(t){return this.editor.insertContent(t)}},{key:"getValue",value:function(){return this.editor.getContent()}},{key:"setValue",value:function(t){return this.editor.setContent(t)}},{key:"imageUploadHandler",value:function(t,e,n,r){var i=this.element;i.dispatchEvent(new CustomEvent("upload-start"));var o=new XMLHttpRequest;o.withCredentials=!1,o.open("POST",this.options.images_upload_url),o.upload.onprogress=function(t){r(t.loaded/t.total*100)},o.addEventListener("load",(function(){if(i.dispatchEvent(new CustomEvent("upload-complete")),200!==o.status&&204!==o.status)return n("HTTP Error: "+decodeURIComponent(o.statusText),{remove:!0}),void i.dispatchEvent(new CustomEvent("upload-error"));var t=JSON.parse(o.responseText);if(!t||"string"!=typeof t.data.url)return n("Invalid JSON: "+o.responseText,{remove:!0}),console.error("Invalid JSON: "+o.responseText),void i.dispatchEvent(new CustomEvent("upload-error"));e(t.data.url),i.dispatchEvent(new CustomEvent("upload-success"))}));var u=new FormData;u.append("file",t.blob(),t.filename()),o.send(u)}}]),t}();function Rn(){return tinymce.PluginManager.add("unicorndragdrop",(function(t){tinyMCE.DOM.bind(document,"dragleave",(function(t){return t.stopPropagation(),t.preventDefault(),tinyMCE.activeEditor.contentAreaContainer.style.transition="all .3s",tinyMCE.activeEditor.contentAreaContainer.style.borderWidth="",!1})),"undefined"!=typeof FormData&&(t.on("dragenter",(function(t){return t.stopPropagation(),!1})),t.on("dragover",(function(t){return t.preventDefault(),tinyMCE.activeEditor.contentAreaContainer.style.transition="all .3s",tinyMCE.activeEditor.contentAreaContainer.style.border="3px dashed rgba(0, 0, 0, .35)",!1})),t.on("drop",(function(e){t.contentAreaContainer.style.borderWidth="",t.contentAreaContainer.style.borderWidth=""})))})),Promise.resolve()}function qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Fn(Nn,"defaultOptions",{});var zn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"install",value:function(t){t.import=this.import}},{key:"import",value:function(t){return window.System.import(t)}}],(n=null)&&qn(e.prototype,n),r&&qn(e,r),t}();n(10);function Hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.app=e,this.aliveHandle=null}var e,n,r;return e=t,n=[{key:"selectOne",value:function(t){return"string"==typeof t&&(t=document.querySelector(t)),pn(t)}},{key:"selectAll",value:function(t,e){"string"==typeof t&&(t=document.querySelectorAll(t));var n=[].slice.call(t);return e?n.map(e):n}},{key:"getBoundedInstance",value:function(t,e,n){var r=this.selectOne(t);return r?r.__unicorn[e]=r.__unicorn[e]||n(r):null}},{key:"h",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement(t);for(var i in e){var o=e[i];r.setAttribute(i,o)}return null!==n&&(r.innerHTML=n),r}},{key:"get",value:function(t,e){for(var n=Array.isArray(e)?e:e.split("."),r=0;r<n.length;r++){var i=n[r];if(!t||!t.hasOwnProperty(i)){t=void 0;break}t=t[i]}return t}},{key:"set",value:function(t,e,n){var r,i=Array.isArray(e)?e:e.split(".");for(r=0;r<i.length-1;r++){var o=i[r];t.hasOwnProperty(o)||(t[o]={}),t=t[o]}return t[i[r]]=n,n}},{key:"isDebug",value:function(){return Boolean(this.app.data("windwalker.debug"))}},{key:"confirm",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return t=t||"Are you sure?",new Promise((function(e){e(confirm(t))}))}))},{key:"addUriBase",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"path";return"//"===t.substr(0,2)||"http"===t.substr(0,4)?t:this.app.asset(e)+"/"+t}},{key:"keepAlive",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4;return this.aliveHandle=window.setInterval((function(){return fetch(t)}),e)}},{key:"stopKeepAlive",value:function(){return clearInterval(this.aliveHandle),this.aliveHandle=null,this}},{key:"isNullDate",value:function(t){return-1!==["0000-00-00 00:00:00",this.getNullDate()].indexOf(t)}},{key:"getNullDate",value:function(){return this.app.data("unicorn.date").empty}},{key:"numberFormat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";e=e||0,t=parseFloat(t);for(var i=Math.round(Math.abs(t)*("1e"+e))+"",o=e?i.slice(0,-1*e):i,u=e?i.slice(-1*e):"",a="";o.length>3;)a+=r+o.slice(-3),o=o.slice(0,-3);return(t<0?"-":"")+o+a+(u?n+u:"")}}],r=[{key:"is",get:function(){return"helper"}},{key:"install",value:function(t){var e=t.$helper=new this(t);t.selectOne=e.selectOne.bind(e),t.selectAll=e.selectAll.bind(e),t.getBoundedInstance=e.getBoundedInstance.bind(e),t.h=e.h,t.$get=e.$get,t.$set=e.$set,t.isDebug=e.isDebug.bind(e),t.confirm=e.confirm.bind(e),t.keepAlive=e.keepAlive.bind(e),t.stopKeepAlive=e.stopKeepAlive,t.isNullDate=e.isNullDate.bind(e),t.getNullDate=e.getNullDate.bind(e),t.numberFormat=e.numberFormat,t.sprintf=sprintf,t.vsprintf=vsprintf}}],n&&Hn(e.prototype,n),r&&Hn(e,r),t}();function Bn(t){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Un(t,e,n){return(Un="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vn(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Vn(t){return(Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Wn(this,"globalAxios",void 0),Wn(this,"axios",void 0),this.app=e,this.config={customMethod:!1},this.data={}}var e,n,r;return e=t,r=[{key:"is",get:function(){return"http"}},{key:"install",value:function(t,e){t.$http=new this(t)}}],(n=[{key:"getSelf",get:function(){return this}},{key:"createHttp",value:function(){var t=this;return this.globalAxios||(this.globalAxios=this.app.import("@axios")),this.globalAxios.then((function(e){return t.axios=e.create(t.options.axios||{})}))}},{key:"getHttp",value:function(){var t=this;return this.axios?Promise.resolve(this.axios):this.createHttp().then((function(e){return t.axios=e}))}},{key:"prepareAxios",value:function(t){t.interceptors.request.use((function(t){return t.headers["X-CSRF-Token"]=this.app.data("csrf-token"),t}))}},{key:"requestMiddleware",value:function(t){return this.getHttp().then((function(e){return e.interceptors.request.use(t)}))}},{key:"responseMiddleware",value:function(t){return this.getHttp().then((function(e){return e.interceptors.response.use(t)}))}},{key:"ready",value:function(){Un(Vn(t.prototype),"ready",this).call(this)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.url=t,e.method="GET",this.request(e)}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.url=t,n.method="POST",n.data=e,this.request(n)}},{key:"put",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.url=t,n.method="PUT",n.data=e,this.request(n)}},{key:"patch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.url=t,n.method="PATCH",n.data=e,this.request(n)}},{key:"delete",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.url=t,n.method="DELETE",n.data=e,this.request(n)}},{key:"head",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.url=t,e.method="HEAD",this.request(e)}},{key:"options",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.url=t,e.method="OPTIONS",this.request(e)}},{key:"request",value:function(t){return this.getHttp().then((function(e){return e(t)}))}},{key:"customMethod",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this;return e.axios=null,e.requestMiddleware((function(e){return t?e.headers["X-HTTP-Method-Override"]=e:"object"===Bn(e.data)?e.data._method=e.method:"string"==typeof e.data&&(e.data.includes("?")?e.data+="&_method="+e.method:e.data+="?_method="+e.method),e.method="POST",e})).then((function(){return e}))}}])&&Ln(e.prototype,n),r&&Ln(e,r),t}();function Gn(t){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zn(t,e){return(Zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=er(t);if(e){var i=er(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yn(this,n)}}function Yn(t,e){return!e||"object"!==Gn(e)&&"function"!=typeof e?tr(t):e}function tr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function er(t){return(er=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zn(t,e)}(o,t);var e,n,r,i=Qn(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Jn(this,o),nr(tr(t=i.call(this)),"plugins",{}),nr(tr(t),"_listeners",{}),nr(tr(t),"waits",[]),t.options=ln({},t.constructor.defaultOptions,e),t.wait((function(t){document.addEventListener("DOMContentLoaded",t)})),document.addEventListener("DOMContentLoaded",(function(){t.completed().then((function(){return t.trigger("loaded")}))})),t}return e=o,r=[{key:"defaultOptions",get:function(){return{}}}],(n=[{key:"use",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(t)?(t.forEach((function(t){return e.use(t)})),this):(t.install(this,n),this.trigger("plugin.installed",t),this)}},{key:"detach",value:function(t){return t.uninstall&&t.uninstall(this),this.trigger("plugin.uninstalled",t),this}},{key:"tap",value:function(t,e){return e(t),t}},{key:"data",value:function(t,e){if(this.trigger("unicorn.data",t,e),document.__unicorn=document.__unicorn||{},void 0===t)return document.__unicorn;if(void 0===e){var n=document.__unicorn[t];return this.trigger("unicorn.data.get",t,n),n}return document.__unicorn[t]=e,this.trigger("unicorn.data.set",t,e),this}},{key:"removeData",value:function(t){return document.__unicorn=document.__unicorn||{},delete document.__unicorn[t],$(document).removeData(t),this}},{key:"uri",value:function(t){return this.data("unicorn.uri")[t]}},{key:"asset",value:function(t){return this.uri("asset")[t]}},{key:"wait",value:function(t){var e=new Promise((function(e,n){var r=t(e,n);r&&"then"in r&&r.then(e).catch(n)}));return this.waits.push(e),e}},{key:"completed",value:function(){var t=Promise.all(this.waits);return this.waits=[],t}}])&&Kn(e.prototype,n),r&&Kn(e,r),o}(f(function(){return function t(){Jn(this,t)}}()).with(O));function ir(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new rr(t)}function or(){var t=window.u;return delete window.u,t}var ur=ir();ur.use(zn),ur.use($n),ur.use(gt),ur.use(Xn),ur.use(yt),ur.use(wt),ur.use(xn),ur.use(yn),ur.use(_t),ur.use(In),window.u=ur}])}));